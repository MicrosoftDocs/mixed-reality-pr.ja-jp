---
title: HoloLens (第 1 世代) アプリを HoloLens 2 に移植する
description: HoloLens (第 1 世代) や前の MRTK バージョンの既存アプリがあり、MRTK バージョン 2 および HoloLens 2 への移植を考えている開発者が対象です。
author: hferrone
ms.author: grbury
ms.date: 12/9/2020
ms.topic: article
ms.localizationpriority: high
keywords: Windows Mixed Reality, テスト, MRTK, MRTK バージョン 2, HoloLens 2, Unity, 移植, HoloLens 第 1 世代, Mixed Reality ヘッドセット, Windows Mixed Reality ヘッドセット, 仮想現実ヘッドセット, 移行, ベスト プラクティス, ARM
ms.openlocfilehash: ddff4ddff70211a5af38e367e863f81fd5f0c82d
ms.sourcegitcommit: 2bf79eef6a9b845494484f458443ef4f89d7efc0
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/17/2020
ms.locfileid: "97612886"
---
# <a name="porting-hololens-1st-gen-apps-to-hololens-2"></a><span data-ttu-id="ae440-104">HoloLens (第 1 世代) アプリを HoloLens 2 に移植する</span><span class="sxs-lookup"><span data-stu-id="ae440-104">Porting HoloLens (1st Gen) apps to HoloLens 2</span></span>

<span data-ttu-id="ae440-105">このガイドは、HoloLens (第 1 世代) 用の既存の Unity アプリケーションを持つ開発者が、アプリケーションを HoloLens 2 デバイス用に移植する場合に役立ちます。</span><span class="sxs-lookup"><span data-stu-id="ae440-105">This guide is tailored to help developers with an existing Unity application for HoloLens (1st gen) port their application for the HoloLens 2 device.</span></span> <span data-ttu-id="ae440-106">HoloLens (第 1 世代) の Unity アプリケーションを HoloLens 2 に移植する主な手順は 4 つあります。</span><span class="sxs-lookup"><span data-stu-id="ae440-106">There are four key steps to porting a HoloLens (1st gen) Unity application to HoloLens 2.</span></span> 

<span data-ttu-id="ae440-107">次のセクションで、各ステージについて詳しく説明します。</span><span class="sxs-lookup"><span data-stu-id="ae440-107">The sections below detail information for each stage:</span></span>

| <span data-ttu-id="ae440-108">手順 1</span><span class="sxs-lookup"><span data-stu-id="ae440-108">Step 1</span></span> | <span data-ttu-id="ae440-109">手順 2</span><span class="sxs-lookup"><span data-stu-id="ae440-109">Step 2</span></span> | <span data-ttu-id="ae440-110">手順 3</span><span class="sxs-lookup"><span data-stu-id="ae440-110">Step 3</span></span> | <span data-ttu-id="ae440-111">手順 4</span><span class="sxs-lookup"><span data-stu-id="ae440-111">Step 4</span></span> |
|----------|-------------------|-------------------|-------------------|
| ![Visual Studio のロゴ](../images/visualstudio_logo.png) | ![Unity のロゴ](../../design/images/logo-unity.png)| ![Unity のアイコン](../unity/images/hololens2_icon.jpg) | ![MRTK のロゴ](../../design/images/74-12.png) |
| <span data-ttu-id="ae440-116">最新のツールのダウンロード</span><span class="sxs-lookup"><span data-stu-id="ae440-116">Download latest tools</span></span> | <span data-ttu-id="ae440-117">Unity プロジェクトの更新</span><span class="sxs-lookup"><span data-stu-id="ae440-117">Update Unity Project</span></span> | <span data-ttu-id="ae440-118">ARM 用にコンパイル</span><span class="sxs-lookup"><span data-stu-id="ae440-118">Compile for ARM</span></span> | <span data-ttu-id="ae440-119">MRTK v2 に移行</span><span class="sxs-lookup"><span data-stu-id="ae440-119">Migrate to MRTK v2</span></span>

## <a name="prerequisites"></a><span data-ttu-id="ae440-120">前提条件</span><span class="sxs-lookup"><span data-stu-id="ae440-120">Prerequisites</span></span>

<span data-ttu-id="ae440-121">移植プロセスを開始する前に、ソース管理を使用してアプリケーションの元の状態のスナップショットを保存しておくことを **強くお勧めします**。</span><span class="sxs-lookup"><span data-stu-id="ae440-121">We **highly recommended** using source control to save a snapshot your applications original state before starting the porting process.</span></span> <span data-ttu-id="ae440-122">さらに、プロセス中のさまざまな時点でチェックポイントの状態を *保存* することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="ae440-122">Additionally, we recommend *saving* checkpoint states at various times during the process.</span></span> <span data-ttu-id="ae440-123">また、元のアプリケーションの別の Unity インスタンスがあると、移植プロセス中に並べて比較できて便利です。</span><span class="sxs-lookup"><span data-stu-id="ae440-123">It can also be helpful to have another Unity instance of the original application to compare side by side during the porting process.</span></span> 

> [!NOTE]
> <span data-ttu-id="ae440-124">移植の前に、Windows Mixed Reality の開発用に最新のツールがインストールされていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="ae440-124">Before porting, ensure you have the latest tools installed for Windows Mixed Reality development.</span></span> <span data-ttu-id="ae440-125">ほとんどの既存 HoloLens 開発者は、最新バージョンの Visual Studio 2019 への更新と適切な Windows SDK のインストールを行うことになります。</span><span class="sxs-lookup"><span data-stu-id="ae440-125">For most existing HoloLens developers, this involves updating to the latest version of Visual Studio 2019 and installing the appropriate Windows SDK.</span></span> <span data-ttu-id="ae440-126">以下の内容では、Unity のさまざまなバージョンと Mixed Reality Toolkit (MRTK) バージョン 2 についてさらに詳しく説明します。</span><span class="sxs-lookup"><span data-stu-id="ae440-126">The content that follows dives further into different Unity versions and the Mixed Reality Toolkit (MRTK) Version 2.</span></span>
>
> <span data-ttu-id="ae440-127">詳しくは、[ツールのインストール](../install-the-tools.md)に関するページをご覧ください。</span><span class="sxs-lookup"><span data-stu-id="ae440-127">For more information, please see [Install the tools](../install-the-tools.md).</span></span>

## <a name="migrate-project-to-the-latest-version-of-unity"></a><span data-ttu-id="ae440-128">プロジェクトを最新バージョンの Unity に移行する</span><span class="sxs-lookup"><span data-stu-id="ae440-128">Migrate project to the latest version of Unity</span></span>

<span data-ttu-id="ae440-129">[MRTK v2](https://github.com/microsoft/MixedRealityToolkit-Unity) を使用している場合、Unity または MRTK で破壊的変更が発生しない最適な長期サポート パスは [Unity 2019 LTS](https://unity3d.com/unity/qa/lts-releases) になります。</span><span class="sxs-lookup"><span data-stu-id="ae440-129">If you're using [MRTK v2](https://github.com/microsoft/MixedRealityToolkit-Unity), [Unity 2019 LTS](https://unity3d.com/unity/qa/lts-releases) is the best long-term support path with no breaking changes in Unity or in MRTK.</span></span> <span data-ttu-id="ae440-130">現在プロジェクトに存在するすべての[プラグインの依存関係](https://docs.unity3d.com/Manual/Plugins.html)を評価し、これらの DLL を ARM64 用にビルドできるかどうかを判断します。</span><span class="sxs-lookup"><span data-stu-id="ae440-130">Assess any [plugin dependencies](https://docs.unity3d.com/Manual/Plugins.html) that currently exist in your project, and determine whether these DLLs can be built for ARM64.</span></span> <span data-ttu-id="ae440-131">ハード ARM64 に依存するプラグインがあるプロジェクトでは、ARM 用のアプリのビルドを続ける必要がある場合があります。</span><span class="sxs-lookup"><span data-stu-id="ae440-131">For projects with a hard ARM64 dependent plugin, you may need to continue building your app for ARM.</span></span>

<!-- MRTK v2 always guarantees support for Unity 2018 LTS, but does not necessarily guarantee support for every iteration of Unity 2019.x.

To help clarify additional differences between [Unity 2018 LTS](https://unity3d.com/unity/qa/lts-releases) and Unity 2019.x, the following table outlines the trade-offs between the two versions. The primary difference between the two is the ability to compile for ARM64 in Unity 2019.

| Unity 2018 LTS | Unity 2019.x |
|----------|-------------------|
| ARM32 build support | ARM32 and ARM64 build support |
| Stable LTS build release | Beta stability |
| [.NET Scripting back-end](https://docs.unity3d.com/2018.4/Documentation/Manual/windowsstore-dotnet.html) *deprecated* | [.NET Scripting back-end](https://docs.unity3d.com/2018.4/Documentation/Manual/windowsstore-dotnet.html) *removed* |
| UNET Networking *deprecated* | UNET Networking *deprecated* |

-->

## <a name="update-sceneproject-settings-in-unity"></a><span data-ttu-id="ae440-132">Unity でシーンまたはプロジェクト設定を更新する</span><span class="sxs-lookup"><span data-stu-id="ae440-132">Update scene/project settings in Unity</span></span>

<span data-ttu-id="ae440-133">デバイスで最適な結果を得るために、[Unity 2019 LTS](https://unity3d.com/unity/qa/lts-releases) に更新した後、Unity の特定の設定を更新することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="ae440-133">After updating to [Unity 2019 LTS](https://unity3d.com/unity/qa/lts-releases), it's recommended that you update particular settings in Unity for optimal results on the device.</span></span> <span data-ttu-id="ae440-134">これらの設定の詳細については、「[Unity で推奨される設定](../unity/Recommended-settings-for-Unity.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="ae440-134">These settings are outlined in detail under [recommended settings for Unity](../unity/Recommended-settings-for-Unity.md).</span></span>

<span data-ttu-id="ae440-135">繰り返しますが、[.NET スクリプト バックエンド](https://docs.unity3d.com/Manual/windowsstore-dotnet.html)は、Unity 2018 で非推奨となり、Unity 2019 で **削除** されます。</span><span class="sxs-lookup"><span data-stu-id="ae440-135">To reiterate, the [.NET scripting back-end](https://docs.unity3d.com/Manual/windowsstore-dotnet.html) is being deprecated in Unity 2018 and **removed** in Unity 2019.</span></span> <span data-ttu-id="ae440-136">開発者の皆様には、プロジェクトの [IL2CPP](https://docs.unity3d.com/Manual/IL2CPP.html) への切り替えを検討することを強くお勧めします。</span><span class="sxs-lookup"><span data-stu-id="ae440-136">Developers should strongly consider switching their project to [IL2CPP](https://docs.unity3d.com/Manual/IL2CPP.html).</span></span>

> [!NOTE]
> <span data-ttu-id="ae440-137">IL2CPP スクリプト バックエンドを使用すると、Unity から Visual Studio へのビルド時間が長くなる場合があります。そのため、開発者は、[IL2CPP ビルド時間の最適化](https://docs.unity3d.com/Manual/IL2CPP-OptimizingBuildTimes.html)のために開発者のコンピューターをセットアップする必要があります。</span><span class="sxs-lookup"><span data-stu-id="ae440-137">IL2CPP scripting back-end can cause longer build times from Unity to Visual Studio, and developers should set up their developer machine for [optimizing IL2CPP build times](https://docs.unity3d.com/Manual/IL2CPP-OptimizingBuildTimes.html).</span></span>
> <span data-ttu-id="ae440-138">また、大きなアセット (スクリプト ファイルを除く) がある場合や、常にシーンやアセットを変更する Unity プロジェクトの場合は、[キャッシュ サーバー](https://docs.unity3d.com/Manual/CacheServer.html)をセットアップするとよいでしょう。</span><span class="sxs-lookup"><span data-stu-id="ae440-138">It might also be beneficial to set up a [cache server](https://docs.unity3d.com/Manual/CacheServer.html), especially for Unity projects with a large amount of assets (excluding script files) or constantly changing scenes and assets.</span></span> <span data-ttu-id="ae440-139">プロジェクトを開く際に、Unity は条件を満たすアセットを内部キャッシュ フォーマットで開発者のコンピューターに格納します。</span><span class="sxs-lookup"><span data-stu-id="ae440-139">When opening a project, Unity stores qualifying assets into an internal cache format on the developer machine.</span></span> <span data-ttu-id="ae440-140">項目を変更した場合は、再インポートして再処理されるようにする必要があります。</span><span class="sxs-lookup"><span data-stu-id="ae440-140">Items must be re-imported and re-processed when modified.</span></span> <span data-ttu-id="ae440-141">このプロセスが 1 回実行されると、キャッシュ サーバーに保存され、すべての開発者と共有されます。すべての開発者がローカルで新しい変更の再インポート処理を行う必要がなくなるので、時間を節約できます。</span><span class="sxs-lookup"><span data-stu-id="ae440-141">This process can be done once and saved in a cache server and consequently shared with other developers to save time, as opposed to every developer processing the re-import of new changes locally.</span></span>

<span data-ttu-id="ae440-142">開発者は、更新された Unity バージョンへの移行によって生じた破壊的変更に対処した後、HoloLens (第 1 世代) 上で現在のアプリケーションをビルドしてテストします。</span><span class="sxs-lookup"><span data-stu-id="ae440-142">After addressing any breaking changes from moving to the updated Unity version, build and test your current applications on HoloLens (1st gen).</span></span> <span data-ttu-id="ae440-143">この時点でソース管理にコミットを作成し、保存しておくとよいでしょう。</span><span class="sxs-lookup"><span data-stu-id="ae440-143">This is a good time to create and save a commit into source control.</span></span>

## <a name="compile-dependenciesplugins-for-arm-processor"></a><span data-ttu-id="ae440-144">ARM プロセッサ用の依存関係およびプラグインのコンパイル</span><span class="sxs-lookup"><span data-stu-id="ae440-144">Compile dependencies/plugins for ARM processor</span></span>

<span data-ttu-id="ae440-145">HoloLens (第 1 世代) は、x86 プロセッサ上でアプリケーションを実行するのに対して、HoloLens 2 は ARM プロセッサを使用します。</span><span class="sxs-lookup"><span data-stu-id="ae440-145">HoloLens (1st gen) executes applications on an x86 processor while the HoloLens 2 uses an ARM processor.</span></span> <span data-ttu-id="ae440-146">既存の HoloLens アプリケーションは、ARM をサポートするように移植する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ae440-146">Existing HoloLens applications need to be ported over to support ARM.</span></span> <span data-ttu-id="ae440-147">前述のように、Unity 2018 LTS は ARM32 アプリのコンパイルをサポートしますが、Unity 2019.x は ARM32 アプリと ARM64 アプリのコンパイルをサポートします。</span><span class="sxs-lookup"><span data-stu-id="ae440-147">As noted earlier, Unity 2018 LTS supports compiling ARM32 apps while Unity 2019.x supports compiling ARM32 and ARM64 apps.</span></span> <span data-ttu-id="ae440-148">パフォーマンスに重要な相違があるため、ARM64 アプリケーション向けの開発をお勧めします。</span><span class="sxs-lookup"><span data-stu-id="ae440-148">Developing for ARM64 applications is preferred, as there's a material difference in performance.</span></span> <span data-ttu-id="ae440-149">ただし、そのためには、すべての[プラグインの依存関係](https://docs.unity3d.com/Manual/Plugins.html)も ARM64 でビルドする必要があります。</span><span class="sxs-lookup"><span data-stu-id="ae440-149">However, this requires all [plugin dependencies](https://docs.unity3d.com/Manual/Plugins.html) to also be built for ARM64.</span></span>

<span data-ttu-id="ae440-150">アプリケーション内のすべての DLL 依存関係を確認してください。</span><span class="sxs-lookup"><span data-stu-id="ae440-150">Review all DLL dependencies in your application.</span></span> <span data-ttu-id="ae440-151">プロジェクトで不要になった依存関係は削除することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="ae440-151">We recommend removing dependencies that are no longer needed for your project.</span></span> <span data-ttu-id="ae440-152">必要な残りのプラグインについて、Unity プロジェクトにそれぞれ ARM32 または ARM64 バイナリを取り込みます。</span><span class="sxs-lookup"><span data-stu-id="ae440-152">For remaining plugins that are required, ingest the respective ARM32 or ARM64 binaries into your Unity project.</span></span>

<span data-ttu-id="ae440-153">関連する DLL を取り込んだ後、Unity から Visual Studio ソリューションをビルドし、アプリケーションが ARM プロセッサでビルドできるかどうかを試すために、Visual Studio で AppX を ARM 向けにコンパイルします。</span><span class="sxs-lookup"><span data-stu-id="ae440-153">After ingesting the relevant DLLs, build a Visual Studio solution from Unity and compile an AppX for ARM in Visual Studio to test your application can be built for ARM processors.</span></span> <span data-ttu-id="ae440-154">ソース管理ソリューションでアプリケーションをコミットとして保存することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="ae440-154">It's advised to save the application as a commit in your source control solution.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="ae440-155">MRTK v1 を使用するアプリケーションは、ビルド ターゲットを ARM に変更すると、HoloLens 2 で実行できるようになります。ただし、他のすべての要件が満たされていることが必要です。</span><span class="sxs-lookup"><span data-stu-id="ae440-155">Application's using MRTK v1 can be run on HoloLens 2 after changing the build target to ARM, assuming that all other requirements are met.</span></span> <span data-ttu-id="ae440-156">これには、すべてのプラグインの ARM バージョンがあることを確認することが含まれます。</span><span class="sxs-lookup"><span data-stu-id="ae440-156">This includes making sure you have ARM versions of all your plugins.</span></span> <span data-ttu-id="ae440-157">ただし、アプリは、多関節ハンドや視線追跡などの HoloLens 2 固有の機能にはアクセスできません。</span><span class="sxs-lookup"><span data-stu-id="ae440-157">However, your app won't have access to HoloLens 2 specific functions like articulated hand and eye tracking.</span></span> <span data-ttu-id="ae440-158">MRTK v1 と MRTK v2 とでは名前空間が異なるため、両方のバージョンを同一のプロジェクトに含めることができます。これは、一方からもう一方に移行するのに役立ちます。</span><span class="sxs-lookup"><span data-stu-id="ae440-158">MRTK v1 and MRTK v2 have different namespaces that allow both versions to be in the same project, which is useful for transitioning from one to the other.</span></span>

## <a name="update-to-mrtk-version-2"></a><span data-ttu-id="ae440-159">MRTK バージョン 2 に更新する</span><span class="sxs-lookup"><span data-stu-id="ae440-159">Update to MRTK version 2</span></span>

<span data-ttu-id="ae440-160">[MRTK バージョン 2](https://github.com/microsoft/MixedRealityToolkit-Unity) は、Unity をベースにした新しいツールキットで、HoloLens (第 1 世代) と HoloLens 2 の両方をサポートします。</span><span class="sxs-lookup"><span data-stu-id="ae440-160">[MRTK Version 2](https://github.com/microsoft/MixedRealityToolkit-Unity) is the new toolkit on top of Unity that supports both HoloLens (1st gen) and HoloLens 2.</span></span> <span data-ttu-id="ae440-161">ここには、手による操作や視線追跡など、HoloLens 2 のすべての新機能も追加されています。</span><span class="sxs-lookup"><span data-stu-id="ae440-161">It's also where all the new HoloLens 2 capabilities have been added, such as hand interactions and eye tracking.</span></span>

<span data-ttu-id="ae440-162">MRTK バージョン 2 の使用方法の詳細については、以下のリソースを参照してください。</span><span class="sxs-lookup"><span data-stu-id="ae440-162">Check out the following resources for more information on using MRTK version 2:</span></span>

- [<span data-ttu-id="ae440-163">MRTK - ドキュメント ホーム (GitHub)</span><span class="sxs-lookup"><span data-stu-id="ae440-163">MRTK - Documentation home (GitHub)</span></span>](https://microsoft.github.io/MixedRealityToolkit-Unity/README.html)
- [<span data-ttu-id="ae440-164">インストール ガイド (GitHub)</span><span class="sxs-lookup"><span data-stu-id="ae440-164">Installation guide (GitHub)</span></span>](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/Installation.html)
- [<span data-ttu-id="ae440-165">MRTK - ハンド トラッキング (GitHub)</span><span class="sxs-lookup"><span data-stu-id="ae440-165">MRTK - Hand tracking (GitHub)</span></span>](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/Input/HandTracking.html)
- [<span data-ttu-id="ae440-166">MRTK - 視線追跡 (GitHub)</span><span class="sxs-lookup"><span data-stu-id="ae440-166">MRTK - Eye tracking (GitHub)</span></span>](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/EyeTracking/EyeTracking_Main.html)

### <a name="prepare-for-the-migration"></a><span data-ttu-id="ae440-167">移行を準備する</span><span class="sxs-lookup"><span data-stu-id="ae440-167">Prepare for the migration</span></span>

<span data-ttu-id="ae440-168">新しい [MRTK v2 用の \*.unitypackage ファイル](https://github.com/Microsoft/MixedRealityToolkit-Unity/releases)を取り込む前に、**1) MRTK v1 を組み込んだ任意のカスタム ビルド コード** と、**2) 入力操作や UX コンポーネント用のカスタム ビルド コード** のインベントリを取得することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="ae440-168">Before ingesting the new [\*.unitypackage files for MRTK v2](https://github.com/Microsoft/MixedRealityToolkit-Unity/releases), it's recommended to take an inventory of **1) any custom-built code that integrates with MRTK v1** and **2) any custom-built code for input interactions or UX components**.</span></span> <span data-ttu-id="ae440-169">Mixed Reality 開発者が MRTK v2 を取り込む際に最も競合が起きやすいのは、入力と操作に関係する部分です。</span><span class="sxs-lookup"><span data-stu-id="ae440-169">The most common and prevalent conflict for a mixed reality developer ingesting MRTK v2 involves input and interactions.</span></span> <span data-ttu-id="ae440-170">[MRTK v2 入力モデル](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/Input/Overview.html)を読んで理解しておくことをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="ae440-170">It's advised to begin reading and understanding the [MRTK v2 input model](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/Input/Overview.html).</span></span>

<span data-ttu-id="ae440-171">最後に、新しい [MRTK v2](https://github.com/microsoft/MixedRealityToolkit-Unity) は、スクリプトのモデルおよびシーン内マネージャー オブジェクトから、構成およびサービス プロバイダー アーキテクチャに移行されています。</span><span class="sxs-lookup"><span data-stu-id="ae440-171">Finally, the new [MRTK v2](https://github.com/microsoft/MixedRealityToolkit-Unity) has transitioned from a model of scripts and in-scene manager objects to a configuration and services provider architecture.</span></span> <span data-ttu-id="ae440-172">これにより、シーンの階層とアーキテクチャのモデルがクリーンになりますが、新しい構成プロファイルを習得する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ae440-172">This results in a cleaner scene hierarchy and architecture model, but requires a learning curve for understanding the new configuration profiles.</span></span> <span data-ttu-id="ae440-173">重要な設定やプロファイルについて理解し、アプリケーションのニーズに合わせて調整することができるように、[Mixed Reality ツールキット構成ガイド](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/MixedRealityConfigurationGuide.html)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="ae440-173">Read the [Mixed Reality Toolkit Configuration Guide](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/MixedRealityConfigurationGuide.html) to start becoming familiar with the important settings and profiles to adjust to the needs of your application.</span></span>

### <a name="migrating-the-project"></a><span data-ttu-id="ae440-174">プロジェクトの移行</span><span class="sxs-lookup"><span data-stu-id="ae440-174">Migrating the project</span></span>

<span data-ttu-id="ae440-175">[MRTK v2](https://github.com/microsoft/MixedRealityToolkit-Unity) をインポートすると、高い確率で、Unity プロジェクトでたくさんのコンパイラ関連エラーが発生します。</span><span class="sxs-lookup"><span data-stu-id="ae440-175">After importing [MRTK v2](https://github.com/microsoft/MixedRealityToolkit-Unity), your Unity project most likely has many compiler-related errors.</span></span> <span data-ttu-id="ae440-176">一般的に、これらの原因は新しい名前空間の構造と新しいコンポーネント名です。</span><span class="sxs-lookup"><span data-stu-id="ae440-176">These are commonly because of the new namespace structure and new component names.</span></span> <span data-ttu-id="ae440-177">スクリプトの名前空間とコンポーネントを新しいものに変更して、これらのエラーの解決を続けます。</span><span class="sxs-lookup"><span data-stu-id="ae440-177">continue to resolve these errors by modifying your scripts to the new namespaces and components.</span></span>

<span data-ttu-id="ae440-178">HTK/MRTK と MRTK v2 の具体的な API の相違点については、[MRTK バージョン 2 wiki](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/HTKToMRTKPortingGuide.html) の移植ガイドをご覧ください。</span><span class="sxs-lookup"><span data-stu-id="ae440-178">For information on the specific API differences between HTK/MRTK and MRTK v2, see the porting guide on the [MRTK Version 2 wiki](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/HTKToMRTKPortingGuide.html).</span></span>

### <a name="best-practices"></a><span data-ttu-id="ae440-179">ベスト プラクティス</span><span class="sxs-lookup"><span data-stu-id="ae440-179">Best practices</span></span>

- <span data-ttu-id="ae440-180">[MRTK 標準シェーダー](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/README_MRTKStandardShader.html)の使用を優先する。</span><span class="sxs-lookup"><span data-stu-id="ae440-180">Prefer use of the [MRTK standard shader](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/README_MRTKStandardShader.html).</span></span>
- <span data-ttu-id="ae440-181">互換性に影響する種類の変更には 1 つずつ対応する (例:IFocusable を [IMixedRealityFocusHandler](https://microsoft.github.io/MixedRealityToolkit-Unity/api/Microsoft.MixedReality.Toolkit.Input.IMixedRealityFocusHandler.html) に)。</span><span class="sxs-lookup"><span data-stu-id="ae440-181">Work on one breaking change type at a time (ex: IFocusable to [IMixedRealityFocusHandler](https://microsoft.github.io/MixedRealityToolkit-Unity/api/Microsoft.MixedReality.Toolkit.Input.IMixedRealityFocusHandler.html)).</span></span>
- <span data-ttu-id="ae440-182">変更のたびにテストし、ソース管理を使用する。</span><span class="sxs-lookup"><span data-stu-id="ae440-182">Test after every change and use source control.</span></span>
- <span data-ttu-id="ae440-183">可能な場合は既定の MRTK UX (ボタン、スレートなど) を使用する。</span><span class="sxs-lookup"><span data-stu-id="ae440-183">Use default MRTK UX (buttons, slates, and so on), when possible.</span></span>
- <span data-ttu-id="ae440-184">MRTK ファイルを直接変更するのは避け、MRTK コンポーネントのラッパーを作成する。</span><span class="sxs-lookup"><span data-stu-id="ae440-184">Refrain from modifying MRTK files directly; create wrappers around MRTK components.</span></span>
    - <span data-ttu-id="ae440-185">この操作をすると、将来の MRTK インジェストや更新が容易になります。</span><span class="sxs-lookup"><span data-stu-id="ae440-185">This action eases future MRTK ingestions and updates.</span></span>
- <span data-ttu-id="ae440-186">MRTK で提供されているサンプルのシーンを確認する (特に *HandInteractionExamples.scene*)。</span><span class="sxs-lookup"><span data-stu-id="ae440-186">Review and explore sample scenes provided in the MRTK, especially *HandInteractionExamples.scene*.</span></span>
- <span data-ttu-id="ae440-187">キャンバス ベースの UI を四角形、コライダー、TextMeshPro テキストで再構築する。</span><span class="sxs-lookup"><span data-stu-id="ae440-187">Rebuild canvas-based UI with quads, colliders, and TextMeshPro text.</span></span>
- <span data-ttu-id="ae440-188">[深度バッファーの共有](../unity/camera-in-unity.md#sharing-your-depth-buffers-with-windows)、または[フォーカス ポイントの設定](../unity/focus-point-in-unity.md)を有効にする。パフォーマンスを向上させたい場合は、16 ビットの深度バッファーを使用します。</span><span class="sxs-lookup"><span data-stu-id="ae440-188">Enable [Depth Buffer Sharing](../unity/camera-in-unity.md#sharing-your-depth-buffers-with-windows) or [set focus point](../unity/focus-point-in-unity.md); prefer to use a 16-bit depth buffer for better performance.</span></span> <span data-ttu-id="ae440-189">色をレンダリングするとき、深度もレンダリングするようにする。</span><span class="sxs-lookup"><span data-stu-id="ae440-189">Ensure when rendering color, to also render depth.</span></span> <span data-ttu-id="ae440-190">Unity では、一般的に、透明およびテキストのゲームオブジェクトの深度は書き込まれません。</span><span class="sxs-lookup"><span data-stu-id="ae440-190">Unity generally doesn't write depth for transparent and text gameobjects.</span></span> 
- <span data-ttu-id="ae440-191">単一パスのインスタンス化レンダリング パスを設定する。</span><span class="sxs-lookup"><span data-stu-id="ae440-191">Set Single Pass Instanced Rendering Path.</span></span>
- <span data-ttu-id="ae440-192">[MRTK 用の HoloLens 2 構成プロファイル](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/Profiles/Profiles.html#hololens-2-profile)を使用する</span><span class="sxs-lookup"><span data-stu-id="ae440-192">Use the [HoloLens 2 configuration profile for MRTK](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/Profiles/Profiles.html#hololens-2-profile)</span></span>

### <a name="testing-your-application"></a><span data-ttu-id="ae440-193">アプリケーションのテスト</span><span class="sxs-lookup"><span data-stu-id="ae440-193">Testing your application</span></span>

<span data-ttu-id="ae440-194">MRTK バージョン 2 では、手による操作を直接 Unity でシミュレートすること、および手による操作と視線追跡用の新しい API を使用して開発を行うことができます。</span><span class="sxs-lookup"><span data-stu-id="ae440-194">In MRTK Version 2, you can simulate hand interactions directly in Unity and develop with the new APIs for hand interactions and eye tracking.</span></span> <span data-ttu-id="ae440-195">十分なユーザー エクスペリエンスを作成するには、HoloLens 2 デバイスが必要です。</span><span class="sxs-lookup"><span data-stu-id="ae440-195">The HoloLens 2 device is required to create a satisfying user experience.</span></span> <span data-ttu-id="ae440-196">より詳しく理解するために、ドキュメントとツールの学習を開始することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="ae440-196">You're encouraged to start studying the documentation and tools for greater understanding.</span></span> <span data-ttu-id="ae440-197">[MRTK v2](https://github.com/microsoft/MixedRealityToolkit-Unity) は HoloLens (第 1 世代) での開発をサポートしています。このため、エアタップによる選択などの従来の入力モデルを HoloLens (第 1 世代) でテストできます。</span><span class="sxs-lookup"><span data-stu-id="ae440-197">[MRTK v2](https://github.com/microsoft/MixedRealityToolkit-Unity) supports development on HoloLens (1st gen) and traditional input models, such as select via air-tap can be tested on HoloLens (1st gen).</span></span> 

## <a name="updating-your-interaction-model-for-hololens-2"></a><span data-ttu-id="ae440-198">HoloLens 2 向けの操作モデルの更新</span><span class="sxs-lookup"><span data-stu-id="ae440-198">Updating your interaction model for HoloLens 2</span></span>

> [!CAUTION]
> <span data-ttu-id="ae440-199">プロジェクトでいずれかの XR.WSA API を使用している場合、今後の Unity のリリースでは Unity の新しい XR 入力 API が優先されるため、それらは段階的に廃止されています。</span><span class="sxs-lookup"><span data-stu-id="ae440-199">If your project is using any of the XR.WSA APIs, these are being phased out in favor of Unity's new XR input APIs in future Unity releases.</span></span> <span data-ttu-id="ae440-200">[XR 入力 API の詳細についてはこちら](https://docs.unity3d.com/Manual/xr_input.html)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="ae440-200">You can find more information about the [XR input APIs here](https://docs.unity3d.com/Manual/xr_input.html).</span></span>

<span data-ttu-id="ae440-201">アプリケーションを移植して HoloLens 2 に対応するよう準備できたら、操作モデルやホログラムの設計配置の更新を検討できるようになります。</span><span class="sxs-lookup"><span data-stu-id="ae440-201">Once your application is ported and prepped for HoloLens 2, you're ready to consider updating your interaction model and hologram design placements.</span></span>
<span data-ttu-id="ae440-202">HoloLens (第 1 世代) では、アプリケーションで視線入力とコミットによる操作モデルが使われており、視野に収まるようにホログラムがかなり遠くにある可能性が高くなります。</span><span class="sxs-lookup"><span data-stu-id="ae440-202">In HoloLens (1st gen), your application likely has a gaze and commit interaction model with holograms relatively far away to fit into the field of view.</span></span>

<span data-ttu-id="ae440-203">アプリケーションの設計を HoloLens 2 に最適な状態になるように更新する手順は次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="ae440-203">Steps to update your application design to be best suited for HoloLens 2:</span></span>
1.  <span data-ttu-id="ae440-204">MRTK コンポーネント:事前の作業で [MRTK v2](https://github.com/microsoft/MixedRealityToolkit-Unity) を追加した場合は、HoloLens 2 用に設計および最適化されているさまざまなコンポーネントやスクリプトを活用できます。</span><span class="sxs-lookup"><span data-stu-id="ae440-204">MRTK components: Per the pre-work, if you added [MRTK v2](https://github.com/microsoft/MixedRealityToolkit-Unity), there are various components/scripts to leverage that have been designed and optimized for HoloLens 2.</span></span>

2.  <span data-ttu-id="ae440-205">操作モデル:操作モデルを更新することを検討します。</span><span class="sxs-lookup"><span data-stu-id="ae440-205">Interaction model: Consider updating your interaction model.</span></span> <span data-ttu-id="ae440-206">ほとんどのシナリオでは、視線入力とコミットを手に切り替えることをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="ae440-206">For most scenarios, we recommend switching from gaze and commit to hands.</span></span> <span data-ttu-id="ae440-207">通常、ホログラムは手の届かないところにあるので、手に切り替えることで、ポインティング レイやグラブ ジェスチャによる遠隔インタラクションを利用することになります。</span><span class="sxs-lookup"><span data-stu-id="ae440-207">With your holograms typically being out of arms-reach, switching to hands results in far interaction pointing rays and grab gestures.</span></span>

3.  <span data-ttu-id="ae440-208">ホログラムの配置:手による操作モデルに切り替えた後は、手で近接インタラクションのグラブ ジェスチャを使用して、直接それらを操作できるように、ホログラムを近くに移動することを検討します。</span><span class="sxs-lookup"><span data-stu-id="ae440-208">Hologram placement: After switching to a hands interaction model, consider moving some holograms closer to directly interact with them, by using near-interaction grab gestures with your hands.</span></span> <span data-ttu-id="ae440-209">直接つかんだり操作を行ったりするために近くに移動させることが推奨されるホログラムの種類は、小さなターゲット メニュー、コントロール、ボタン、およびグラブしたり調べたりしても HoloLens 2 の視野に収まる小さなホログラムです。</span><span class="sxs-lookup"><span data-stu-id="ae440-209">The types of holograms recommended to move closer to directly grab or interact are small target menus, controls, buttons, and smaller holograms that fit within the HoloLens 2 field of view when grabbing and inspecting the hologram.</span></span>
<br>
<span data-ttu-id="ae440-210">どのアプリケーションやシナリオにも同じものはないので、フィードバックや継続する学習に基づいて設計ガイダンスを見直し、掲載し続ける予定です。</span><span class="sxs-lookup"><span data-stu-id="ae440-210">Every application and scenario are different, and we’ll continue to refine and post design guidance based on feedback and continued learnings.</span></span>


## <a name="additional-caveats-and-learnings-about-moving-applications-from-x86-to-arm"></a><span data-ttu-id="ae440-211">X86 から ARM へのアプリケーションの移行に関するその他の注意事項と確認事項</span><span class="sxs-lookup"><span data-stu-id="ae440-211">Additional caveats and learnings about moving applications from x86 to ARM</span></span>

- <span data-ttu-id="ae440-212">単純な Unity アプリケーションは、ARM アプリケーション バンドルを構築できるため、またはバンドルを実行するためにデバイスに直接デプロイできるため、シンプルです。</span><span class="sxs-lookup"><span data-stu-id="ae440-212">Straight-forward Unity applications are simple because you can build an ARM application bundle or deploy directly to the device for the bundle to run.</span></span> <span data-ttu-id="ae440-213">一部の Unity ネイティブ プラグインでは、特定の開発上の課題が発生する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="ae440-213">Some Unity native plugins can present certain development challenges.</span></span> <span data-ttu-id="ae440-214">このため、すべての Unity ネイティブ プラグインを Visual Studio 2019 にアップグレードし、その後、ARM 用に再構築する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ae440-214">Because of this, you must upgrade all Unity native plugins to Visual Studio 2019 and then rebuild for ARM.</span></span>

- <span data-ttu-id="ae440-215">1 つのアプリケーションで Unity AudioKinetic Wwise プラグインが使用されており、そのバージョンの Unity には UWP ARM プラグインがなかったため、ARM 上で実行するその問題のアプリケーションにサウンド機能を再構成するためにかなりの労力が必要でした。</span><span class="sxs-lookup"><span data-stu-id="ae440-215">One application used the Unity AudioKinetic Wwise plugin and that version of Unity didn't have a UWP ARM plugin, which caused a considerable effort to rework sound capabilities into the application in question to run on ARM.</span></span> <span data-ttu-id="ae440-216">開発プランに必要なすべてのプラグインがインストールされていて、Unity で利用できることを確認してください。</span><span class="sxs-lookup"><span data-stu-id="ae440-216">Ensure that all required plugins for your development plans are installed and available in Unity.</span></span>

- <span data-ttu-id="ae440-217">場合によっては、アプリケーションが必要とするプラグインに UWP/ARM プラグインが存在しない場合があります。これにより、アプリケーションを移植して HoloLens 2 で実行する機能がブロックされます。</span><span class="sxs-lookup"><span data-stu-id="ae440-217">In some cases, a UWP/ARM plugin might not exist for application-required plugins, which blocks the ability to port the application and run it on HoloLens 2.</span></span> <span data-ttu-id="ae440-218">問題を解決して ARM のサポートを提供するには、プラグインのプロバイダーにお問い合わせください。</span><span class="sxs-lookup"><span data-stu-id="ae440-218">Contact your plugin provider to resolve the issue and provide support for ARM.</span></span>

- <span data-ttu-id="ae440-219">シェーダーの minfloat (および min16float、minint などのバリアント) の動作は、HoloLens 2 と HoloLens (第 1 世代) で異なる場合があります。</span><span class="sxs-lookup"><span data-stu-id="ae440-219">The minfloat (and variants such as min16float, minint, and so on) in shaders might behave differently on HoloLens 2 than on HoloLens (1st gen).</span></span> <span data-ttu-id="ae440-220">具体的には、「少なくとも指定された数のビットが使われる」ことが保証されます。</span><span class="sxs-lookup"><span data-stu-id="ae440-220">Specifically, these guarantee that at least the specified number of bits will be used.</span></span> <span data-ttu-id="ae440-221">Intel または NVIDIA の GPU では、minfloat は主に 32 ビットとして扱われます。</span><span class="sxs-lookup"><span data-stu-id="ae440-221">On Intel/Nvidia GPUs, minfloats are largely treated as 32 bits.</span></span> <span data-ttu-id="ae440-222">ARM では、指定されたビット数が実際に使用されます。</span><span class="sxs-lookup"><span data-stu-id="ae440-222">On ARM, the number of bits specified is actually adhered to.</span></span> <span data-ttu-id="ae440-223">つまり、実際には、HoloLens 2 でのこれらの数値の精度や範囲は、HoloLens (第 1 世代) よりも小さくなります。</span><span class="sxs-lookup"><span data-stu-id="ae440-223">That means in practice, these numbers might have less precision or range on HoloLens 2 than they did on HoloLens (1st gen).</span></span>

- <span data-ttu-id="ae440-224">ARM では _asm 命令は動作しないと見られるので、_asm 命令を使用しているコードはすべて書き直す必要があります。</span><span class="sxs-lookup"><span data-stu-id="ae440-224">The _asm instructions don’t appear to work on ARM, meaning any code using _asm instructions must be rewritten.</span></span>

- <span data-ttu-id="ae440-225">ARM では xmmintrin.h、emmintrin.h、tmmintrin.h、immintrin.h などの各種ヘッダーを使用できないため、ARM では SIMD 命令セットはサポートされません。</span><span class="sxs-lookup"><span data-stu-id="ae440-225">ARM doesn't support the SIMD instruction set because various headers, such as xmmintrin.h, emmintrin.h, tmmintrin.h, and immintrin.h, aren't available on ARM.</span></span>

- <span data-ttu-id="ae440-226">ARM のシェーダー コンパイラは、シェーダーの読み込み時ではなく、シェーダーが読み込まれた後またはシェーダーが依存するものが変更された後の最初の描画呼び出しの中で実行されます。</span><span class="sxs-lookup"><span data-stu-id="ae440-226">The shader compiler on ARM runs during the first draw call after the shader has been loaded or something the shader relies on has changed, not at shader load time.</span></span> <span data-ttu-id="ae440-227">コンパイルする必要があるシェーダーの数によっては、フレームレートへの影響が顕著になる場合があります。これは、HoloLens 2 と HoloLens (第 1 世代) でシェーダーの処理、パッケージ化、更新の方法をどのように変えるべきかについて、さまざまな影響を与えます。</span><span class="sxs-lookup"><span data-stu-id="ae440-227">The impact on framerate can be noticeable, depending on how many shaders need to be compiled, with implications for how shaders should be handled, packaged, updated differently on HoloLens 2 vs HoloLens (1st gen).</span></span>

## <a name="see-also"></a><span data-ttu-id="ae440-228">関連項目</span><span class="sxs-lookup"><span data-stu-id="ae440-228">See also</span></span>
* [<span data-ttu-id="ae440-229">ツールのインストール</span><span class="sxs-lookup"><span data-stu-id="ae440-229">Install the tools</span></span>](../install-the-tools.md)
* [<span data-ttu-id="ae440-230">MRTK - インストール ガイド (GitHub)</span><span class="sxs-lookup"><span data-stu-id="ae440-230">MRTK - Installation guide (GitHub)</span></span>](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/Installation.html)
* [<span data-ttu-id="ae440-231">MRTK - ドキュメント ホーム (GitHub)</span><span class="sxs-lookup"><span data-stu-id="ae440-231">MRTK - Documentation home (GitHub)</span></span>](https://microsoft.github.io/MixedRealityToolkit-Unity/README.html)
* [<span data-ttu-id="ae440-232">HoloToolkit/MRTK から MRTK バージョン 2 への移植 (GitHub)</span><span class="sxs-lookup"><span data-stu-id="ae440-232">Porting from HoloToolkit/MRTK to MRTK version 2 (GitHub)</span></span>](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/HTKToMRTKPortingGuide.html)
* [<span data-ttu-id="ae440-233">Unity で推奨される設定</span><span class="sxs-lookup"><span data-stu-id="ae440-233">Recommended settings for Unity</span></span>](../unity/recommended-settings-for-unity.md)
* [<span data-ttu-id="ae440-234">Mixed Reality のパフォーマンスを理解する</span><span class="sxs-lookup"><span data-stu-id="ae440-234">Understanding performance for Mixed Reality</span></span>](../platform-capabilities-and-apis/understanding-performance-for-mixed-reality.md)

