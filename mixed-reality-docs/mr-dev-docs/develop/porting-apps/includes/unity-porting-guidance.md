---
ms.openlocfilehash: 487118403c2a8af1a6b54bc9aa9245fbe9d0568a
ms.sourcegitcommit: bec6029b2780c54cc04a45ef7ae5df3f5b4727c1
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/01/2020
ms.locfileid: "96477199"
---
# <a name="project-settings"></a>[<span data-ttu-id="142bd-101">プロジェクト設定</span><span class="sxs-lookup"><span data-stu-id="142bd-101">Project settings</span></span>](#tab/project)

### <a name="1-review-the-common-porting-steps-listed-above"></a><span data-ttu-id="142bd-102">1. 上記の一般的な移植手順を確認してください</span><span class="sxs-lookup"><span data-stu-id="142bd-102">1. Review the common porting steps listed above</span></span>

<span data-ttu-id="142bd-103">開発環境が正しく設定されていることを確認するために、上記の一般的な手順を確認してください。</span><span class="sxs-lookup"><span data-stu-id="142bd-103">Review the common steps listed above to make sure your development environment is set up correctly.</span></span> <span data-ttu-id="142bd-104">Visual Studio を使用している場合は、手順 #3 で、[ **Unity を使用したゲーム開発** ] ワークロードを選択する必要があります。</span><span class="sxs-lookup"><span data-stu-id="142bd-104">In step #3, if you're using Visual Studio you should select the **Game Development with Unity** workload.</span></span> <span data-ttu-id="142bd-105">次の手順で新しいバージョンの Unity をインストールするため、"Unity エディターオプション" コンポーネントの選択を解除できます。</span><span class="sxs-lookup"><span data-stu-id="142bd-105">You may deselect the "Unity Editor optional" component since you'll be installing a newer version of Unity in the next step.</span></span>

### <a name="2-upgrade-to-the-latest-public-build-of-unity-with-windows-mr-support"></a><span data-ttu-id="142bd-106">2. Windows MR サポートを使用して Unity の最新のパブリックビルドにアップグレードする</span><span class="sxs-lookup"><span data-stu-id="142bd-106">2. Upgrade to the latest public build of Unity with Windows MR Support</span></span>
1. <span data-ttu-id="142bd-107">Mixed reality サポートを使用して、 [Unity の最新の推奨パブリックビルド](../../install-the-tools.md) をダウンロードします。</span><span class="sxs-lookup"><span data-stu-id="142bd-107">Download the latest [recommended public build of Unity](../../install-the-tools.md) with mixed reality support.</span></span>
2. <span data-ttu-id="142bd-108">作業を開始する前にプロジェクトのコピーを保存する</span><span class="sxs-lookup"><span data-stu-id="142bd-108">Save a copy of your project before you get started</span></span>
3. <span data-ttu-id="142bd-109">以前のバージョンの Unity でプロジェクトがビルドされている場合は、アップグレード時に Unity から入手できる [ドキュメント](https://docs.unity3d.com/Manual/UpgradeGuides.html) を確認してください。</span><span class="sxs-lookup"><span data-stu-id="142bd-109">Review the [documentation](https://docs.unity3d.com/Manual/UpgradeGuides.html) available from Unity on upgrading if your project was built on an older version of Unity.</span></span>
4. <span data-ttu-id="142bd-110">Unity のサイトで自動 API アップデーターを使用する [手順](https://docs.unity3d.com/Manual/APIUpdater.html) に従います。</span><span class="sxs-lookup"><span data-stu-id="142bd-110">Follow the [instructions](https://docs.unity3d.com/Manual/APIUpdater.html) on Unity's site for using their automatic API updater</span></span>
5. <span data-ttu-id="142bd-111">プロジェクトを実行するために必要な追加の変更があるかどうかを確認し、残りのエラーと警告を解決します。</span><span class="sxs-lookup"><span data-stu-id="142bd-111">Check and see if there are additional changes that you need to make to get your project running, and work through any remaining errors and warnings.</span></span> 

> [!Note] 
> <span data-ttu-id="142bd-112">依存しているミドルウェアがある場合は、最新のリリースを使用していることを確認してください (以下の手順 3. の詳細)。</span><span class="sxs-lookup"><span data-stu-id="142bd-112">If you have middleware that you depend on, check that you're using the latest release (more details in step 3 below).</span></span>

### <a name="3-upgrade-your-middleware-to-the-latest-versions"></a><span data-ttu-id="142bd-113">3. ミドルウェアを最新バージョンにアップグレードする</span><span class="sxs-lookup"><span data-stu-id="142bd-113">3. Upgrade your middleware to the latest versions</span></span>

<span data-ttu-id="142bd-114">Unity の更新プログラムでは、ゲームまたはアプリケーションが依存している1つ以上のミドルウェアパッケージを更新することが必要になる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="142bd-114">With any Unity update, there's a good chance that you'll need to update one or more middleware packages that your game or application depends on.</span></span> <span data-ttu-id="142bd-115">さらに、最新のミドルウェアで最新の状態になると、移植プロセスの残りの部分全体で成功の可能性が高まります。</span><span class="sxs-lookup"><span data-stu-id="142bd-115">Additionally, being up to date with the latest middleware increases the likelihood of success throughout the rest of the porting process.</span></span>

### <a name="4-target-your-application-to-run-on-win32"></a><span data-ttu-id="142bd-116">4. Win32 で実行するようにアプリケーションをターゲットにする</span><span class="sxs-lookup"><span data-stu-id="142bd-116">4. Target your application to run on Win32</span></span>

<span data-ttu-id="142bd-117">Unity アプリケーション内から:</span><span class="sxs-lookup"><span data-stu-id="142bd-117">From inside your Unity application:</span></span>

* <span data-ttu-id="142bd-118">ファイル > のビルド設定に移動します</span><span class="sxs-lookup"><span data-stu-id="142bd-118">Navigate to File -> Build Settings</span></span>
* <span data-ttu-id="142bd-119">[PC、Mac、Linux スタンドアロン] を選択します。</span><span class="sxs-lookup"><span data-stu-id="142bd-119">Select "PC, Mac, Linux Standalone"</span></span>
* <span data-ttu-id="142bd-120">ターゲットプラットフォームを "Windows" に設定します</span><span class="sxs-lookup"><span data-stu-id="142bd-120">Set target platform to "Windows"</span></span>
* <span data-ttu-id="142bd-121">アーキテクチャを "x86" に設定し、[プラットフォームの切り替え] を選択します。</span><span class="sxs-lookup"><span data-stu-id="142bd-121">Set architecture to "x86" Select "Switch Platform"</span></span>

> [!NOTE] 
> <span data-ttu-id="142bd-122">アプリケーションがデバイス固有のサービスに依存している場合 (ストリームからの照合など)、この手順で無効にする必要があります。</span><span class="sxs-lookup"><span data-stu-id="142bd-122">If your application has any dependencies on device-specific services, such as match making from Steam, you'll need to disable them at this step.</span></span> <span data-ttu-id="142bd-123">後で Windows が提供する同等のサービスにフックできます。</span><span class="sxs-lookup"><span data-stu-id="142bd-123">You can hook up to the equivalent services that Windows provides later on.</span></span>

### <a name="5-setup-your-windows-mixed-reality-hardware"></a><span data-ttu-id="142bd-124">5. Windows Mixed Reality ハードウェアをセットアップする</span><span class="sxs-lookup"><span data-stu-id="142bd-124">5. Setup your Windows Mixed Reality hardware</span></span>
1. <span data-ttu-id="142bd-125">[イマーシブヘッドセットのセットアップ](https://docs.microsoft.com/windows/mixed-reality/enthusiast-guide/before-you-start
)の手順を確認する</span><span class="sxs-lookup"><span data-stu-id="142bd-125">Review steps in [Immersive headset setup](https://docs.microsoft.com/windows/mixed-reality/enthusiast-guide/before-you-start
)</span></span>
2. <span data-ttu-id="142bd-126">[Windows Mixed reality シミュレーターを使用する](../../platform-capabilities-and-apis/using-the-windows-mixed-reality-simulator.md)方法と[windows mixed Reality ホームを移動](../../../discover/navigating-the-windows-mixed-reality-home.md)する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="142bd-126">Learn about [Using the Windows Mixed Reality simulator](../../platform-capabilities-and-apis/using-the-windows-mixed-reality-simulator.md) and [Navigating the Windows Mixed Reality home](../../../discover/navigating-the-windows-mixed-reality-home.md)</span></span>

### <a name="6-target-your-application-to-run-on-windows-mixed-reality"></a><span data-ttu-id="142bd-127">6. Windows Mixed Reality で実行するようにアプリケーションをターゲットにする</span><span class="sxs-lookup"><span data-stu-id="142bd-127">6. Target your application to run on Windows Mixed Reality</span></span>
1. <span data-ttu-id="142bd-128">まず、特定の VR SDK に固有の他のライブラリサポートを削除するか、条件に応じてコンパイルする必要があります。</span><span class="sxs-lookup"><span data-stu-id="142bd-128">First, you must remove or conditionally compile out any other library support specific to a particular VR SDK.</span></span> <span data-ttu-id="142bd-129">これらの資産は、Windows Mixed Reality などの他の VR Sdk と互換性のない方法でプロジェクトの設定とプロパティを頻繁に変更します。</span><span class="sxs-lookup"><span data-stu-id="142bd-129">Those assets frequently change settings and properties on your project in ways that are incompatible with other VR SDKs, such as Windows Mixed Reality.</span></span>
    * <span data-ttu-id="142bd-130">たとえば、プロジェクトが SteamVR SDK を参照している場合は、代わりに、Windows Mixed Reality と SteamVR の両方をサポートする Unity の一般的な VR Api を使用するようにプロジェクトを更新する必要があります。</span><span class="sxs-lookup"><span data-stu-id="142bd-130">For example, if your project references the SteamVR SDK, you'll need to update your project to instead use Unity's common VR APIs that support both Windows Mixed Reality and SteamVR.</span></span>
    * <span data-ttu-id="142bd-131">条件付きで他の VR Sdk を除外するための具体的な手順は近日対応予定です。</span><span class="sxs-lookup"><span data-stu-id="142bd-131">Specific steps for conditionally excluding other VR SDKs are coming soon.</span></span>
2. <span data-ttu-id="142bd-132">Unity プロジェクトで、 [Windows 10 SDK を対象とする](../../unity/tutorials/holograms-100.md#target-windows-10-sdk)</span><span class="sxs-lookup"><span data-stu-id="142bd-132">In your Unity project, [target the Windows 10 SDK](../../unity/tutorials/holograms-100.md#target-windows-10-sdk)</span></span>
3. <span data-ttu-id="142bd-133">シーンごとに、[カメラを設定します](../../unity/tutorials/holograms-100.md#chapter-2---setup-the-camera)。</span><span class="sxs-lookup"><span data-stu-id="142bd-133">For each scene, [setup the camera](../../unity/tutorials/holograms-100.md#chapter-2---setup-the-camera)</span></span>

### <a name="7-use-the-stage-to-place-content-on-the-floor"></a><span data-ttu-id="142bd-134">7. ステージを使用して、床にコンテンツを配置します。</span><span class="sxs-lookup"><span data-stu-id="142bd-134">7. Use the stage to place content on the floor</span></span>

<span data-ttu-id="142bd-135">さまざまな [エクスペリエンススケール](../../../design/coordinate-systems.md)にわたって、混合した現実のエクスペリエンスを構築できます。</span><span class="sxs-lookup"><span data-stu-id="142bd-135">You can build Mixed Reality experiences across a wide range of [experience scales](../../../design/coordinate-systems.md).</span></span>

<span data-ttu-id="142bd-136">取り付けられている **スケールエクスペリエンス** を移植する場合は、Unity が **固定** の追跡領域の種類に設定されていることを確認する必要があります。</span><span class="sxs-lookup"><span data-stu-id="142bd-136">If you're porting a **seated-scale experience**, you must ensure Unity is set to the **Stationary** tracking space type:</span></span>

```cs
XRDevice.SetTrackingSpaceType(TrackingSpaceType.Stationary);
```

<span data-ttu-id="142bd-137">上記のコードでは、Unity のワールド座標系を設定して、 [参照の静止フレーム](../../../design/coordinate-systems.md#spatial-coordinate-systems)を追跡します。</span><span class="sxs-lookup"><span data-stu-id="142bd-137">This above code sets Unity's world coordinate system to track the [stationary frame of reference](../../../design/coordinate-systems.md#spatial-coordinate-systems).</span></span> <span data-ttu-id="142bd-138">静止の追跡モードでは、アプリの起動時に、カメラの既定の場所 (フォワードが Z) の前にエディターに配置されたコンテンツがユーザーの前に表示されます。</span><span class="sxs-lookup"><span data-stu-id="142bd-138">In the Stationary tracking mode, content placed in the editor just in front of the camera's default location (forward is -Z) appears in front of the user when the app launches.</span></span> <span data-ttu-id="142bd-139">ユーザーが recenter した元の位置を確認するには、Unity の XR を呼び出すことができ [ます。InputTracking. Recenter](https://docs.unity3d.com/ScriptReference/XR.InputTracking.Recenter.html) メソッド。</span><span class="sxs-lookup"><span data-stu-id="142bd-139">To recenter the user's seated origin, you can call Unity's [XR.InputTracking.Recenter](https://docs.unity3d.com/ScriptReference/XR.InputTracking.Recenter.html) method.</span></span>

<span data-ttu-id="142bd-140">継続的な **スケールエクスペリエンス** または **ルームスケールエクスペリエンス** を移植している場合は、フロアを基準にコンテンツを配置します。</span><span class="sxs-lookup"><span data-stu-id="142bd-140">If you're porting a **standing-scale experience** or **room-scale experience**, you'll be placing content relative to the floor.</span></span> <span data-ttu-id="142bd-141">ユーザーが定義したフロアレベルのオリジンとオプションの部屋の境界を表す **[空間ステージ](../../../design/coordinate-systems.md#spatial-coordinate-systems)** を使用して、ユーザーのフロアについては、最初の実行時に設定します。</span><span class="sxs-lookup"><span data-stu-id="142bd-141">You reason about the user's floor using the **[spatial stage](../../../design/coordinate-systems.md#spatial-coordinate-systems)**, which represents the user's defined floor-level origin and optional room boundary, set up during first run.</span></span> <span data-ttu-id="142bd-142">これらのエクスペリエンスについては、Unity が **RoomScale** の追跡領域の種類に設定されていることを確認する必要があります。</span><span class="sxs-lookup"><span data-stu-id="142bd-142">For these experiences, you must ensure Unity is set to the **RoomScale** tracking space type.</span></span> <span data-ttu-id="142bd-143">RoomScale が既定値であるのに対し、明示的に設定して、ユーザーが自分のコンピューターを調整した部屋から離れた状況を検出するために、true に戻すことをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="142bd-143">While RoomScale is the default, you'll want to set it explicitly and ensure you get back true, to catch situations where the user has moved their computer away from the room they calibrated:</span></span>

```cs
if (XRDevice.SetTrackingSpaceType(TrackingSpaceType.RoomScale))
{
    // RoomScale mode was set successfully.  App can now assume that y=0 in Unity world coordinate represents the floor.
}
else
{
    // RoomScale mode was not set successfully.  App cannot make assumptions about where the floor plane is.
}
```

<span data-ttu-id="142bd-144">アプリで RoomScale の追跡領域の種類が正常に設定されると、y = 0 平面に配置されたコンテンツがフロア上に表示されます。</span><span class="sxs-lookup"><span data-stu-id="142bd-144">Once your app successfully sets the RoomScale tracking space type, content placed on the y=0 plane will appear on the floor.</span></span> <span data-ttu-id="142bd-145">(0, 0, 0) の原点は、部屋のセットアップ中にユーザーがそこしたフロア上の特定の場所になります。これは、セットアップ中に接続されていた前方方向を表す-Z です。</span><span class="sxs-lookup"><span data-stu-id="142bd-145">The origin at (0, 0, 0) will be the specific place on the floor where the user stood during room setup, with -Z representing the forward direction they were facing during setup.</span></span>

<span data-ttu-id="142bd-146">スクリプトコードでは、TrackedArea の境界の種類を指定して、境界ポリゴンを取得するために、XR 型の TryGetGeometry メソッドを呼び出すことができます。</span><span class="sxs-lookup"><span data-stu-id="142bd-146">In script code, you can then call the TryGetGeometry method on you're the UnityEngine.Experimental.XR.Boundary type to get a boundary polygon, specifying a boundary type of TrackedArea.</span></span> <span data-ttu-id="142bd-147">ユーザーが境界を定義している場合 (頂点の一覧を取得した場合)、ユーザーに **ルームスケールエクスペリエンス** を提供し、ユーザーが作成したシーンを周囲にたどることができます。</span><span class="sxs-lookup"><span data-stu-id="142bd-147">If the user defined a boundary (you get back a list of vertices), it's safe to deliver a **room-scale experience** to the user, where they can walk around the scene you create.</span></span>

<span data-ttu-id="142bd-148">ユーザーがこの境界に近づいたときに、境界が自動的に表示されます。</span><span class="sxs-lookup"><span data-stu-id="142bd-148">The system will automatically render the boundary when the user approaches it.</span></span> <span data-ttu-id="142bd-149">アプリでは、境界自体をレンダリングするためにこの多角形を使用する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="142bd-149">Your app does not need to use this polygon to render the boundary itself.</span></span>

<span data-ttu-id="142bd-150">詳細については、「 [Unity の座標系](../../unity/coordinate-systems-in-unity.md) 」ページを参照してください。</span><span class="sxs-lookup"><span data-stu-id="142bd-150">For more information, see the [Coordinate systems in Unity](../../unity/coordinate-systems-in-unity.md) page.</span></span>

<!-- Some applications use a rectangle to constrain their interaction. Retrieving the largest inscribed rectangle is not directly supported in the UWP API or Unity. The example code linked to below shows how to find a rectangle within the traced bounds. It's heuristic-based so may not find the optimal solution, however, results are consistent with expectations. Parameters in the algorithm can be tuned to find more precise results at the cost of processing time. The algorithm is in a fork of the Mixed Reality Toolkit that uses the 5.6 preview MRTP version of Unity. This isn't publicly available. The code should be directly usable in 2017.2 and higher versions of Unity. The code will be ported to the current MRTK in the near future. -->

<span data-ttu-id="142bd-151">結果の例:</span><span class="sxs-lookup"><span data-stu-id="142bd-151">Example of results:</span></span>

![結果の例](../../porting-apps/images/largestrectangle-400px.jpg)

<span data-ttu-id="142bd-153">アルゴリズムは、Daniel Smilkov: [polygon 内の最大の四角形](https://d3plus.org/blog/behind-the-scenes/2014/07/08/largest-rect/)によるブログに基づいています</span><span class="sxs-lookup"><span data-stu-id="142bd-153">Algorithm is based on a blog by Daniel Smilkov: [Largest rectangle in a polygon](https://d3plus.org/blog/behind-the-scenes/2014/07/08/largest-rect/)</span></span>

### <a name="8-work-through-your-input-model"></a><span data-ttu-id="142bd-154">8. 入力モデルを処理する</span><span class="sxs-lookup"><span data-stu-id="142bd-154">8. Work through your input model</span></span>

<span data-ttu-id="142bd-155">既存の HMD を対象とする各ゲームまたはアプリケーションには、処理する入力のセット、エクスペリエンスに必要な入力の種類、およびそれらの入力を取得するために呼び出す特定の Api が含まれます。</span><span class="sxs-lookup"><span data-stu-id="142bd-155">Each game or application targeting an existing HMD will have a set of inputs that it handles, types of inputs that it needs for the experience, and specific APIs that it calls to get those inputs.</span></span> <span data-ttu-id="142bd-156">Windows Mixed Reality で利用可能な入力を活用するために、可能な限りシンプルで単純なものにするために投資してきました。</span><span class="sxs-lookup"><span data-stu-id="142bd-156">We've invested in trying to make it as simple and straightforward as possible to take advantage of the inputs available in Windows Mixed Reality.</span></span>

<span data-ttu-id="142bd-157">Windows Mixed Reality が入力を公開する方法と、それが現在のアプリケーションの動作にどのように対応しているかの詳細については、隣接するタブの [Unity の入力移植ガイド](https://docs.microsoft.com/windows/mixed-reality/develop/porting-apps/porting-guides?tabs=input) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="142bd-157">Read through the [input porting guide for Unity](https://docs.microsoft.com/windows/mixed-reality/develop/porting-apps/porting-guides?tabs=input) in the adjacent tab for details of how Windows Mixed Reality exposes input, and how that maps to what your application may do today.</span></span>

### <a name="9-performance-testing-and-tuning"></a><span data-ttu-id="142bd-158">9. パフォーマンステストとチューニング</span><span class="sxs-lookup"><span data-stu-id="142bd-158">9. Performance testing and tuning</span></span>

<span data-ttu-id="142bd-159">Windows Mixed Reality は、ハイエンドゲーム Pc から広範な市場メインストリーム Pc まで、さまざまな種類のデバイスで利用できます。</span><span class="sxs-lookup"><span data-stu-id="142bd-159">Windows Mixed Reality will be available on a broad class of devices, ranging from high end gaming PCs, down to broad market mainstream PCs.</span></span> <span data-ttu-id="142bd-160">対象となる市場によっては、アプリケーションに対して使用可能なコンピューティングとグラフィックの予算に大きな違いがあります。</span><span class="sxs-lookup"><span data-stu-id="142bd-160">Depending on what market you're targeting, there's a significant difference in the available compute and graphics budgets for your application.</span></span> <span data-ttu-id="142bd-161">この移植の演習では、premium PC を利用している可能性があります。また、アプリで使用できるコンピューティングとグラフィックの大きな予算があります。</span><span class="sxs-lookup"><span data-stu-id="142bd-161">During this porting exercise, you're likely leveraging a premium PC, and have had significant compute and graphics budgets available to your app.</span></span> <span data-ttu-id="142bd-162">アプリをより広範囲のユーザーが使用できるようにする場合は、 [対象とする代表的なハードウェア](https://docs.microsoft.com/windows/mixed-reality/enthusiast-guide/windows-mixed-reality-minimum-pc-hardware-compatibility-guidelines)でアプリをテストしてプロファイリングする必要があります。</span><span class="sxs-lookup"><span data-stu-id="142bd-162">If you wish to make your app available to a broader audience, you should test and profile your app on [the representative hardware that you wish to target](https://docs.microsoft.com/windows/mixed-reality/enthusiast-guide/windows-mixed-reality-minimum-pc-hardware-compatibility-guidelines).</span></span>

<span data-ttu-id="142bd-163">[Unity](https://docs.unity3d.com/Manual/Profiler.html)と[Visual Studio](https://docs.microsoft.com/visualstudio/profiling/index)のどちらにも、パフォーマンスプロファイラーと、パフォーマンスプロファイルと最適化に関する[Microsoft](../../platform-capabilities-and-apis/understanding-performance-for-mixed-reality.md)と[Intel](https://software.intel.com/articles/vr-content-developer-guide)の両方の発行ガイドラインが含まれています。</span><span class="sxs-lookup"><span data-stu-id="142bd-163">Both [Unity](https://docs.unity3d.com/Manual/Profiler.html) and [Visual Studio](https://docs.microsoft.com/visualstudio/profiling/index) include performance profilers, and both [Microsoft](../../platform-capabilities-and-apis/understanding-performance-for-mixed-reality.md) and [Intel](https://software.intel.com/articles/vr-content-developer-guide) publish guidelines on performance profiling and optimization.</span></span> <span data-ttu-id="142bd-164">[混合現実のパフォーマンスを理解](../../platform-capabilities-and-apis/understanding-performance-for-mixed-reality.md)することで、パフォーマンスに関する広範な説明があります。</span><span class="sxs-lookup"><span data-stu-id="142bd-164">There's an extensive discussion of performance available at [Understanding Performance for Mixed Reality](../../platform-capabilities-and-apis/understanding-performance-for-mixed-reality.md).</span></span> <span data-ttu-id="142bd-165">さらに、unity の [パフォーマンスに関する推奨事項](../../unity/performance-recommendations-for-unity.md)には、unity に関する具体的な詳細があります。</span><span class="sxs-lookup"><span data-stu-id="142bd-165">Further, there are specific details for Unity under [Performance Recommendations for Unity](../../unity/performance-recommendations-for-unity.md).</span></span>

# <a name="input-mapping"></a>[<span data-ttu-id="142bd-166">入力マッピング</span><span class="sxs-lookup"><span data-stu-id="142bd-166">Input mapping</span></span>](#tab/input)

<span data-ttu-id="142bd-167">2つの方法のいずれかを使用して、入力ロジックを Windows Mixed Reality に移植できます。 Unity の一般的な入力です。複数のプラットフォームにまたがっている GetButton/GetAxis Api、または Windows 固有の XR です。付い.モーションコントローラーと HoloLens ハンド専用の豊富なデータを提供する入力 Api。</span><span class="sxs-lookup"><span data-stu-id="142bd-167">You can port your input logic to Windows Mixed Reality using one of two approaches, Unity's general Input.GetButton/GetAxis APIs that span across multiple platforms, or the Windows-specific XR.WSA.Input APIs that offer richer data specifically for motion controllers and HoloLens hands.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="142bd-168">HP リバーブ G2 コントローラーを使用している場合は、追加の入力マッピング手順については、こちらの [記事](../../unity/unity-reverb-g2-controllers.md) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="142bd-168">If your using HP Reverb G2 controllers, please refer to [this article](../../unity/unity-reverb-g2-controllers.md) for additional input mapping instructions.</span></span>

## <a name="unity-xr-input-apis"></a><span data-ttu-id="142bd-169">Unity XR 入力 Api</span><span class="sxs-lookup"><span data-stu-id="142bd-169">Unity XR input APIs</span></span>

<span data-ttu-id="142bd-170">新しいプロジェクトの場合は、最初から新しい XR 入力 Api を使用することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="142bd-170">For new projects, we recommend using the new XR input APIs from the beginning.</span></span> 

<span data-ttu-id="142bd-171">[XR api](https://docs.unity3d.com/Manual/xr_input.html)の詳細については、こちらを参照してください。</span><span class="sxs-lookup"><span data-stu-id="142bd-171">You can find more information about the [XR APIs here](https://docs.unity3d.com/Manual/xr_input.html).</span></span>

## <a name="inputgetbuttongetaxis-apis"></a><span data-ttu-id="142bd-172">GetButton/GetAxis Api の入力</span><span class="sxs-lookup"><span data-stu-id="142bd-172">Input.GetButton/GetAxis APIs</span></span>

<span data-ttu-id="142bd-173">Unity では、現在、一般的な入力である GetButton/GetAxis Api を使用して [、OCULUS sdk](https://docs.unity3d.com/Manual/OculusControllers.html) と [openvr sdk](https://docs.unity3d.com/Manual/OpenVRControllers.html)の入力を公開しています。</span><span class="sxs-lookup"><span data-stu-id="142bd-173">Unity currently uses its general Input.GetButton/Input.GetAxis APIs to expose input for [the Oculus SDK](https://docs.unity3d.com/Manual/OculusControllers.html) and [the OpenVR SDK](https://docs.unity3d.com/Manual/OpenVRControllers.html).</span></span> <span data-ttu-id="142bd-174">アプリが既にこれらの Api を入力に使用している場合は、これが Windows Mixed Reality でのモーションコントローラーをサポートするための最も簡単なパスです。入力マネージャーでボタンと軸を再マップするだけで済みます。</span><span class="sxs-lookup"><span data-stu-id="142bd-174">If your apps are already using these APIs for input, this is the easiest path for supporting motion controllers in Windows Mixed Reality: you should just need to remap buttons and axes in the Input Manager.</span></span>

<span data-ttu-id="142bd-175">詳細については、「 [unity のボタン/軸マッピングテーブル](../../unity/gestures-and-motion-controllers-in-unity.md#unity-buttonaxis-mapping-table) 」と「 [共通 unity api の概要](../../unity/gestures-and-motion-controllers-in-unity.md#common-unity-apis-inputgetbuttongetaxis)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="142bd-175">For more information, see the [Unity button/axis mapping table](../../unity/gestures-and-motion-controllers-in-unity.md#unity-buttonaxis-mapping-table) and the [overview of the common Unity APIs](../../unity/gestures-and-motion-controllers-in-unity.md#common-unity-apis-inputgetbuttongetaxis).</span></span>

## <a name="windows-specific-xrwsainput-apis"></a><span data-ttu-id="142bd-176">Windows 固有の XR。付い.入力 Api</span><span class="sxs-lookup"><span data-stu-id="142bd-176">Windows-specific XR.WSA.Input APIs</span></span>

> [!CAUTION]
> <span data-ttu-id="142bd-177">プロジェクトが XR のいずれかを使用している場合。WSA Api は、今後の Unity リリースで XR SDK を優先するように段階的に廃止されています。</span><span class="sxs-lookup"><span data-stu-id="142bd-177">If your project is using any of the XR.WSA APIs, these are being phased out in favor of the XR SDK in future Unity releases.</span></span> <span data-ttu-id="142bd-178">新しいプロジェクトの場合は、最初から XR SDK を使用することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="142bd-178">For new projects, we recommend using the XR SDK from the beginning.</span></span> <span data-ttu-id="142bd-179">[XR 入力システムと api](https://docs.unity3d.com/Manual/xr_input.html)の詳細については、こちらを参照してください。</span><span class="sxs-lookup"><span data-stu-id="142bd-179">You can find more information about the [XR Input system and APIs here](https://docs.unity3d.com/Manual/xr_input.html).</span></span>

<span data-ttu-id="142bd-180">アプリが各プラットフォームのカスタム入力ロジックを既に作成している場合は、 **XR** 名前空間の下で Windows 固有の空間入力 api を使用することを選択できます。</span><span class="sxs-lookup"><span data-stu-id="142bd-180">If your app already builds custom input logic for each platform, you can choose to use the Windows-specific spatial input APIs under the **UnityEngine.XR.WSA.Input** namespace.</span></span> <span data-ttu-id="142bd-181">これにより、位置の精度やソースの種類などの追加情報にアクセスして、HoloLens で両手とコントローラーを区別できるようになります。</span><span class="sxs-lookup"><span data-stu-id="142bd-181">This lets you access additional information, such as position accuracy or the source kind, letting you tell hands and controllers apart on HoloLens.</span></span>

> [!NOTE]
> <span data-ttu-id="142bd-182">HP リバーブ G2 コントローラーを使用している場合、すべての入力 Api は、 **supportsTouchpad** を除くすべての入力 api を引き続き動作します。これは、タッチパッドデータなしで false を返します。</span><span class="sxs-lookup"><span data-stu-id="142bd-182">If you're using HP Reverb G2 controllers, all input APIs will continue to work except for **InteractionSource.supportsTouchpad**, which will return false with no touchpad data.</span></span>

<span data-ttu-id="142bd-183">詳細については、「 [UnityEngine. XR api の概要](../../unity/gestures-and-motion-controllers-in-unity.md#windows-specific-apis-xrwsainput)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="142bd-183">For more information, see the [overview of the UnityEngine.XR.WSA.Input APIs](../../unity/gestures-and-motion-controllers-in-unity.md#windows-specific-apis-xrwsainput).</span></span>

## <a name="grip-pose-vs-pointing-pose"></a><span data-ttu-id="142bd-184">グリップポーズとポインティングポーズ</span><span class="sxs-lookup"><span data-stu-id="142bd-184">Grip pose vs. pointing pose</span></span>

<span data-ttu-id="142bd-185">Windows Mixed Reality では、さまざまなフォームファクターでモーションコントローラーがサポートされています。各コントローラーの設計は、ユーザーの手の位置と、アプリがコントローラーを表示するときに使用する自然な "進む" 方向との間の関係において異なります。</span><span class="sxs-lookup"><span data-stu-id="142bd-185">Windows Mixed Reality supports motion controllers in a variety of form factors, with each controller's design differing in its relationship between the user's hand position and the natural "forward" direction that apps should use for pointing when rendering the controller.</span></span>

<span data-ttu-id="142bd-186">これらのコントローラーをより適切に表現するために、相互作用ソースごとに調査できる2種類の方法があります。</span><span class="sxs-lookup"><span data-stu-id="142bd-186">To better represent these controllers, there are two kinds of poses you can investigate for each interaction source:</span></span>

* <span data-ttu-id="142bd-187">**グリップ** は、HoloLens によって検出されたハンドの位置を表します。または、運動コントローラーを持つパームです。</span><span class="sxs-lookup"><span data-stu-id="142bd-187">The **grip pose**, representing the location of either the palm of a hand detected by a HoloLens, or the palm holding a motion controller.</span></span>
    * <span data-ttu-id="142bd-188">イマーシブヘッドセットでは、この方法を使用して、 **ユーザーの手** や、剣や銃などの **ユーザーの手に保持** されているオブジェクトをレンダリングすることをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="142bd-188">On immersive headsets, this pose is best used to render **the user's hand** or **an object held in the user's hand**, such as a sword or gun.</span></span>
    * <span data-ttu-id="142bd-189">**グリップの位置**: コントローラーを自然に保持するときのパーム重心。グリップ内の位置を中央に配置するように左右に調整されます。</span><span class="sxs-lookup"><span data-stu-id="142bd-189">The **grip position**: The palm centroid when holding the controller naturally, adjusted left or right to center the position within the grip.</span></span>
    * <span data-ttu-id="142bd-190">**グリップの向きの右軸**: 手を完全に開いて平らな5本の指を作成した場合 (左側のパームから前方、右側のパームから後方)、</span><span class="sxs-lookup"><span data-stu-id="142bd-190">The **grip orientation's Right axis**: When you completely open your hand to form a flat 5-finger pose, the ray that is normal to your palm (forward from left palm, backward from right palm)</span></span>
    * <span data-ttu-id="142bd-191">**グリップの向きの前方軸**: ハンドを部分的に閉じた場合 (コントローラーを保持している場合と同様)、非表示の指で形成されたチューブを通過する光線。</span><span class="sxs-lookup"><span data-stu-id="142bd-191">The **grip orientation's Forward axis**: When you close your hand partially (as if holding the controller), the ray that points "forward" through the tube formed by your non-thumb fingers.</span></span>
    * <span data-ttu-id="142bd-192">**グリップの向きの上位軸**: 右および順方向の定義によって暗黙的に示される上位軸。</span><span class="sxs-lookup"><span data-stu-id="142bd-192">The **grip orientation's Up axis**: The Up axis implied by the Right and Forward definitions.</span></span>
    * <span data-ttu-id="142bd-193">このグリップには、Unity のクロスベンダ入力 API (XR) を使用してアクセスでき **[ます。InputTracking](https://docs.unity3d.com/ScriptReference/XR.InputTracking.html)。GetLocalPosition/Rotation**) または Windows 固有の API (**TryGetPosition/rotation**) を使用して、グリップを要求します。</span><span class="sxs-lookup"><span data-stu-id="142bd-193">You can access the grip pose through either Unity's cross-vendor input API (**[XR.InputTracking](https://docs.unity3d.com/ScriptReference/XR.InputTracking.html).GetLocalPosition/Rotation**) or through the Windows-specific API (**sourceState.sourcePose.TryGetPosition/Rotation**, requesting the Grip pose).</span></span>
* <span data-ttu-id="142bd-194">**ポインター** は、前方を指し示すコントローラーの先端を表します。</span><span class="sxs-lookup"><span data-stu-id="142bd-194">The **pointer pose**, representing the tip of the controller pointing forward.</span></span>
    * <span data-ttu-id="142bd-195">この方法は、コントローラーモデル自体をレンダリングするときに **UI をポイント** するときに raycast するために使用することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="142bd-195">This pose is best used to raycast when **pointing at UI** when you are rendering the controller model itself.</span></span>
    * <span data-ttu-id="142bd-196">現時点では、ポインターのポーズは、Windows 固有の API (**Sourcestate/Rotation**) を介してのみ使用でき、ポインターのポーズを要求します。</span><span class="sxs-lookup"><span data-stu-id="142bd-196">Currently, the pointer pose is available only through the Windows-specific API (**sourceState.sourcePose.TryGetPosition/Rotation**, requesting the Pointer pose).</span></span>

<span data-ttu-id="142bd-197">これらの発生座標はすべて Unity のワールド座標で表現されます。</span><span class="sxs-lookup"><span data-stu-id="142bd-197">These pose coordinates are all expressed in Unity world coordinates.</span></span>
