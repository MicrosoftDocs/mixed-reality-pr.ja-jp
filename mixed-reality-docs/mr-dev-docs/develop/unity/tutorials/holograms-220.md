---
title: MR 空間 220-空間サウンド
description: Unity、Visual Studio、および HoloLens を使用したこのコーディングのチュートリアルに従って、空間サウンドの概念の詳細を確認してください。
author: keveleigh
ms.author: kurtie
ms.date: 10/22/2019
ms.topic: article
keywords: holotoolkit、mixedrealitytoolkit、mixedrealitytoolkit、academy、チュートリアル、空間サウンド
ms.openlocfilehash: 1da57024fbc069fcfc7d522175cf6d542304414a
ms.sourcegitcommit: 09599b4034be825e4536eeb9566968afd021d5f3
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/03/2020
ms.locfileid: "91688986"
---
# <a name="mr-spatial-220-spatial-sound"></a>MR 空間 220:立体音響

>[!NOTE]
>Mixed Reality Academy のチュートリアルは、HoloLens (第 1 世代) と Mixed Reality イマーシブ ヘッドセットを念頭に置いて編成されています。  そのため、それらのデバイスの開発に関するガイダンスを引き続き探している開発者のために、これらのチュートリアルをそのまま残しておくことが重要だと考えています。  これらのチュートリアルが、HoloLens 2 に使用されている最新のツールセットや操作に更新されることは " **_ありません_** "。  これらは、サポートされているデバイス上で継続して動作するように、保守されます。 HoloLens 2 向けには、[新しいチュートリアル シリーズ](../../../mr-learning-base-01.md)が投稿されています。

[空間サウンド](../../../design/spatial-sound.md) はホログラムに breathes し、世界中に存在します。 ホログラムは、ライトとサウンドの両方で構成されています。ホログラムが見えなくなった場合は、空間サウンドを使用して見つけることができます。 空間サウンドは、無線で聞くことができる一般的なサウンドとは異なり、3D 空間に配置されています。 空間サウンドを使用すると、ユーザーの背後、または自分の頭にいるかのように、ホログラムを鳴らすことができます。 このコースでは、次のことを行います。

* Microsoft の空間サウンドを使用するように開発環境を構成します。
* 相互作用を強化するには、空間サウンドを使用します。
* 空間の [マッピング](../../../design/spatial-mapping.md)と共に空間サウンドを使用します。
* サウンドのデザインとベストプラクティスの混在を理解します。
* 音を使用して特殊効果を向上させ、ユーザーを混合現実の世界に持ち込むことができます。

## <a name="device-support"></a>デバイス サポート

<table>
<tr>
<th>コース</th><th style="width:150px"> <a href="../../../hololens-hardware-details.md">HoloLens</a></th><th style="width:150px"> <a href="../../../discover/immersive-headset-hardware-details.md">イマーシブ ヘッドセット</a></th>
</tr><tr>
<td>MR 空間 220:立体音響</td><td style="text-align: center;"> ✔️</td><td style="text-align: center;"> ✔️</td>
</tr>
</table>

## <a name="before-you-start"></a>開始する前に

### <a name="prerequisites"></a>前提条件

* 適切な [ツールがインストール](../../../develop/install-the-tools.md)された WINDOWS 10 PC。
* 基本的な C# プログラミング機能。
* [MR の基本 101](../../../develop/unity/tutorials/holograms-101.md)を完了している必要があります。
* [開発用に構成され](../../../develop/platform-capabilities-and-apis/using-visual-studio.md#enabling-developer-mode)た HoloLens デバイス。

### <a name="project-files"></a>プロジェクト ファイル

* プロジェクトに必要な [ファイル](https://github.com/Microsoft/HolographicAcademy/archive/Holograms-220-SpatialSound.zip) をダウンロードします。 Unity 2017.2 以降が必要です。
  * 引き続き Unity 5.6 のサポートが必要な場合は、 [このリリース](https://github.com/Microsoft/HolographicAcademy/archive/v1.5.6-220.zip)をご利用ください。 このリリースは最新ではなくなる可能性があります。
  * 引き続き Unity 5.5 のサポートが必要な場合は、 [このリリース](https://github.com/Microsoft/HolographicAcademy/archive/v1.5.5-220.zip)をご利用ください。 このリリースは最新ではなくなる可能性があります。
  * 引き続き Unity 5.4 のサポートが必要な場合は、 [このリリース](https://github.com/Microsoft/HolographicAcademy/archive/v1.5.4-220.zip)をご利用ください。 このリリースは最新ではなくなる可能性があります。
* ファイルをデスクトップまたはその他の簡単な場所に保管します。

>[!NOTE]
>ダウンロードする前にソースコードを確認する場合は、GitHub から [入手でき](https://github.com/Microsoft/HolographicAcademy/tree/Holograms-220-SpatialSound)ます。

### <a name="errata-and-notes"></a>エラッタとメモ

* コード内のブレークポイントにヒットするには、Visual Studio の [ツール]->オプション->デバッグ] の下にある [マイコードのみを有効にする] を無効 ( *オフ* ) にする必要があります。

## <a name="chapter-1---unity-setup"></a>章 1-Unity のセットアップ

### <a name="objectives"></a>目標

* Microsoft の空間サウンドを使用するように Unity のサウンド構成を変更します。
* Unity のオブジェクトに3D サウンドを追加します。

### <a name="instructions"></a>Instructions

* Unity を起動します。
* **[Open (開く)]** を選択します。
* デスクトップに移動し、以前にアーカイブしていないフォルダーを見つけます。
* **Starting\Decibel** フォルダーをクリックし、[フォルダーの **選択** ] ボタンを押します。
* Unity にプロジェクトが読み込まれるのを待ちます。
* [ **プロジェクト** ] パネルで、[ **Scenes\Decibel.unity** ] を開きます。
* [ **階層** ] パネルで、[ **HologramCollection** ] を展開し、[ **P0LY** ] を選択します。
* インスペクターで、[ **Audiosource** ] を展開し、[ **Spatialize** ] チェックボックスが表示されないことを確認します。

既定では、Unity は spatializer プラグインを読み込みません。 次の手順を実行すると、プロジェクトの空間サウンドが有効になります。

* Unity のトップメニューで、[ **Edit > Project Settings > Audio** ] を開きます。
* **Spatializer プラグイン** のドロップダウンを見つけて、[ **MS HRTF Spatializer** ] を選択します。
* [ **階層** ] パネルで、[ **HologramCollection > P0LY** ] を選択します。
* [ **インスペクター** ] パネルで、[ **オーディオソース** ] コンポーネントを見つけます。
* **Spatialize** チェックボックスをオンにします。
* [ **空間 Blend** ] スライダーを **3d** にドラッグするか、編集ボックスに「 **1** 」と入力します。

ここでは、Unity でプロジェクトをビルドし、Visual Studio でソリューションを構成します。

1. Unity で、[ **ファイル > ビルド設定** ] を選択します。
2. シーンを追加するには、[開いている **シーンの追加** ] をクリックします。
3. [ **プラットフォーム** ] ボックスの一覧の [ **ユニバーサル Windows プラットフォーム** ] を選択し、[ **プラットフォームの切り替え** ] をクリックします。
4. HoloLens 向けに特に開発している場合は、 **ターゲットデバイス** を **hololens** に設定します。 それ以外の場合は、 **任意のデバイス** に残しておきます。
5. **ビルドの種類** が [ **D3D** ] に設定され、[ **sdk** ] が [ **最新のインストール済み** ] に設定されていることを確認します (sdk 16299 以降である必要があります)。
6. [ **ビルド** ] をクリックします。
7. "App" という名前の **新しいフォルダー** を作成します。
8. **アプリ** フォルダーをシングルクリックします。
9. **[フォルダーの選択]** をクリックします。

Unity が完了すると、エクスプローラーウィンドウが表示されます。

1. **アプリ** フォルダーを開きます。
2. **デシベル Visual Studio ソリューション** を開きます。

HoloLens に展開する場合:

1. Visual Studio の上部のツールバーを使用して、ターゲットをデバッグから **リリース** に変更し、ARM から **x86** に変更します。
2. [ローカルコンピューター] ボタンの横にあるドロップダウン矢印をクリックし、[ **リモートコンピューター** ] を選択します。
3. **HoloLens デバイスの IP アドレス** を入力し、[認証モード] を [ **ユニバーサル (暗号化** されていないプロトコル)] に設定します。 **[選択]** をクリックします。 デバイスの IP アドレスがわからない場合は、[ **設定] [Network & Internet > 詳細オプション >** 確認してください。
4. 上部のメニューバーで、[デバッグ]、[ **デバッグなしで開始** ] の順にクリック >、Ctrl キーを押し **ながら F5** キーを押します。 初めてデバイスをデプロイする場合は、 [Visual Studio とペアリング](../../../develop/platform-capabilities-and-apis/using-visual-studio.md#pairing-your-device)する必要があります。

イマーシブヘッドセットに展開する場合:

1. Visual Studio の上部のツールバーを使用して、ターゲットをデバッグから **リリース** に、ARM から **x64** に変更します。
2. 配置ターゲットが **ローカルコンピューター** に設定されていることを確認します。
3. 上部のメニューバーで、[デバッグ]、[ **デバッグなしで開始** ] の順にクリック >、Ctrl キーを押し **ながら F5** キーを押します。

## <a name="chapter-2---spatial-sound-and-interaction"></a>第2章: 空間サウンドと相互作用

### <a name="objectives"></a>目標

* サウンドを使用して、ホログラムのリアリティを高めます。
* サウンドを使用して、ユーザーの宝石を誘導します。
* サウンドを使用してジェスチャに関するフィードバックを提供します。

### <a name="part-1---enhancing-realism"></a>パート 1-リアリティの向上

#### <a name="key-concepts"></a>主要概念

* Spatialize ホログラムサウンド。
* サウンドソースは、ホログラムの適切な場所に配置する必要があります。

サウンドの適切な場所は、ホログラムに依存します。 たとえば、ホログラムが人間の場合、サウンドソースは、脚ではなく口の近くに配置する必要があります。

#### <a name="instructions"></a>Instructions

次の手順では、spatialized サウンドをホログラムにアタッチします。

* [ **階層** ] パネルで、[ **HologramCollection** ] を展開し、[ **P0LY** ] を選択します。
* [ **インスペクター** ] パネルの [ **audiosource** ] で、[ **audiosource** ] の横にある円をクリックし、ポップアップから [ **PolyHover** ] を選択します。
* [ **出力** ] の横にある円をクリックし、ポップアップから [ **SoundEffects** ] を選択します。

プロジェクトのデシベルは、Unity **Audiomixer** コンポーネントを使用して、サウンドグループのサウンドレベルを調整できるようにします。 この方法でサウンドをグループ化することで、各サウンドの相対的なボリュームを維持しながら、全体的なボリュームを調整できます。

* **Audiosource** で、[ **3d サウンド設定** ] を展開します。
* **ドップラーレベル** を **0** に設定します。

ドップラーレベルを0に設定すると、モーション (ホログラムまたはユーザーのいずれか) によるピッチの変更が無効になります。 ドップラーの典型的な例は、高速移動車です。 車が静止リスナーに近づくにつれて、エンジンのピッチは上がります。 リスナーがリスナーに渡されると、距離によってピッチが低下します。

### <a name="part-2---directing-the-users-gaze"></a>パート 2-ユーザーの宝石を誘導する

#### <a name="key-concepts"></a>主要概念

* サウンドを使用して、重要なホログラムに注意してください。
* 耳は、目が見える場所に直接役立ちます。
* 脳には、期待されることがあります。

1つの例として、鳥は一般に人間の頭を超えています。 ユーザーが鳥のサウンドを聞くと、最初の反応が検索されます。 ユーザーの下に鳥を配置すると、それらのユーザーが正しい方向のサウンドを使用することになりますが、検索が必要になると予想されるホログラムを見つけることができません。

#### <a name="instructions"></a>Instructions

次の手順を実行すると、P0LY を使用して、ホログラムを見つけることができるようになります。

* [ **階層** ] パネルで、[ **マネージャー** ] を選択します。
* [ **インスペクター** ] パネルで、[ **音声入力ハンドラー** ] を見つけます。
* **音声入力ハンドラー** で、 **[表示** しない] を展開します。
* **関数** を **PolyActions** に変更します。

![キーワード: [非表示にする]](images/gohide.png)

### <a name="part-3---gesture-feedback"></a>パート 3-ジェスチャに関するフィードバック

#### <a name="key-concepts"></a>主要概念

* サウンドを使用してユーザーに正のジェスチャ確認を提供する
* ユーザーに大きな音がかからないようにしてください。
* 微妙なサウンドが最適であり、エクスペリエンスを過度に影にしない

#### <a name="instructions"></a>Instructions

* [ **階層** ] パネルで、[ **HologramCollection** ] を展開します。
* [ **EnergyHub** ] を展開し、[ **Base** ] を選択します。
* [ **インスペクター** ] パネルで、[ **コンポーネントの追加** ] をクリックし、[ **ジェスチャサウンドハンドラー** の追加] をクリックします。
* [ **ジェスチャサウンドハンドラー** ] で、[ナビゲーションの **開始] クリップ** と **ナビゲーション更新クリップ** の横にある円をクリックし、両方のポップアップから [ **RotateClick** ] を選択します。
* Visual Studio に読み込むには、"GestureSoundHandler" をダブルクリックします。

ジェスチャサウンドハンドラーは、次のタスクを実行します。

* **Audiosource** を作成および構成します。
* 適切な **オブジェクト** の場所に **audiosource** を配置します。
* ジェスチャに関連付けられている **Audioclip** を再生します。

#### <a name="build-and-deploy"></a>ビルドと配置

1. Unity で、[ **ファイル > ビルド設定** ] を選択します。
2. [ **ビルド** ] をクリックします。
3. **アプリ** フォルダーをシングルクリックします。
4. **[フォルダーの選択]** をクリックします。

ツールバーに "Release"、"x86"、"x64"、および "Remote Device" と表示されていることを確認します。 それ以外の場合は、Visual Studio のコーディングインスタンスになります。 場合によっては、アプリフォルダーからソリューションを再度開く必要があります。

* メッセージが表示されたら、プロジェクトファイルを再度読み込みます。
* 前と同様に、Visual Studio からデプロイします。

アプリケーションが展開された後:

* P0LY の周りを移動すると、サウンドがどのように変化するかを観察します。
* *[非表示* にする] を指定すると、P0LY が自分の位置に移動します。 サウンドで検索します。
* エネルギーハブのベースを見つめます。 左または右にドラッグしてホログラムを回転させ、クリック音によってジェスチャが確認されることを確認します。

メモ: ユーザーにタグを付けるテキストパネルがあります。 これには、このコース全体で使用できる音声コマンドが含まれています。

## <a name="chapter-3---spatial-sound-and-spatial-mapping"></a>第3章: 空間サウンドと空間マッピング

### <a name="objectives"></a>目標

* サウンドを使用して、ホログラムと実際の世界の間の相互作用を確認します。
* Occlude は、物理的な世界を使ってサウンドを再生します。

### <a name="part-1---physical-world-interaction"></a>パート 1-物理的な世界の相互作用

#### <a name="key-concepts"></a>主要概念

* 通常、物理オブジェクトは、サーフェイスや別のオブジェクトが検出したときに音を鳴らします。
* サウンドは、エクスペリエンスの中で適切なコンテキストである必要があります。

たとえば、テーブルのカップを設定すると、金属の一部で boulder を落とした場合よりも静かに聞こえます。

#### <a name="instructions"></a>Instructions

* [ **階層** ] パネルで、[ **HologramCollection** ] を展開します。
* [ **EnergyHub** ] を展開し、[ **Base** ] を選択します。
* [ **インスペクター** ] パネルで [ **コンポーネントの追加** ] をクリックし、[再生] を追加し **てサウンドとアクションを** 設定します。
* **サウンドとアクションを使用して配置する場合** :
  * **タップ時に親を** 確認します。
  * 配置の **サウンド** を **配置** するように設定します。
  * **ピックアップ音** を **集配** に設定します。
  * **Pickup アクション** と **配置アクション** の両方の下で、下の方の [+] を押します。 シーンから EnergyHub **(オブジェクト)** フィールドに [] をドラッグします。
    * [ **ピックアップアクション** ] で、[ **No Function**  ->  **EnergyHubBase**  ->  **resetanimation** ] をクリックします。
    * [ **配置アクション** ] で、[ **No Function**  ->  **EnergyHubBase**  ->  **onselect** ] をクリックします。

![サウンドとアクションを使用して配置するには、タップしてください](images/holograms220-taptoplace.png)

### <a name="part-2---sound-occlusion"></a>パート 2-サウンドオクルージョン

#### <a name="key-concepts"></a>主要概念

* ライトのようなサウンドは、occluded にすることができます。

従来の例としては、コンサートホールがあります。 リスナーがホールの外部にあり、ドアが閉じている場合、音楽サウンドは muffled ます。 また、通常はボリュームが減少しています。 ドアを開くと、実際のボリュームでサウンドの全範囲が聞こえます。 高頻度のサウンドは、一般に低周波数よりも多く吸収されます。

#### <a name="instructions"></a>Instructions

* [ **階層** ] パネルで、[ **HologramCollection** ] を展開し、[ **P0LY** ] を選択します。
* [ **インスペクター** ] パネルで、[ **コンポーネントの追加** ] をクリックし、 **オーディオエミッタ** を追加します。

オーディオエミッタクラスは、次の機能を提供します。

* **Audiosource** のボリュームに対するすべての変更を復元します。
* **AudioEmitter** がアタッチされて **いる、ユーザー** の位置から、 **RaycastNonAlloc** を実行します。

RaycastNonAlloc メソッドは、割り当てと返される結果の数を制限するために、パフォーマンスの最適化として使用されます。

* 検出された各 **Iaudioinfluencer** ついて、は **applyeffect** メソッドを呼び出します。
* 以前に発生したすべての **Iaudioinfluencer** ついて、 **removeeffect** メソッドを呼び出します。

AudioEmitter は、フレームごとではなく、人間の時間単位で更新されることに注意してください。 この処理が行われるのは、一般に、影響をより頻繁に更新する必要があるほど高速ではないためです。 ある場所から別の場所に急速にテレポートするホログラムは、錯覚を壊す可能性があります。

* [ **階層** ] パネルで、[ **HologramCollection** ] を展開します。
* **EnergyHub** を展開し、[ **bloboutside** ] を選択します。
* [ **インスペクター** ] パネルで、[ **コンポーネントの追加** ] をクリックし、 **Audio Occluder** を追加します。
* **Audio Occluder** で、[ **カットオフの頻度** ] を **1500** に設定します。

この設定により、AudioSource の周波数が 1500 Hz 以下に制限されます。

* **ボリュームパススルー** を **0.9** に設定します。

この設定により、AudioSource の音量が現在のレベルの90% に減少します。

Audio Occluder は、次のように IAudioInfluencer 有力企業を実装します。

* Audiosource に接続されている **Audiolowpass filter** を使用し **AudioSource** て、遮蔽効果を適用します。このフィルターは、 **AudioEmitter** を購入します。
* オーディオソースにボリュームの減衰を適用します。
* ニュートラルカットオフ周波数を設定し、フィルターを無効にすることで、効果を無効にします。

ニュートラルとして使用される頻度は 22 kHz (22000 Hz) です。 この頻度が選択されたのは、人間の耳によって聞こえる可能性のある最大周波数を超えているためです。これにより、サウンドへのはっきりの影響はありません。

* [ **階層** ] パネルで、[ **SpatialMapping** ] を選択します。
* [ **インスペクター** ] パネルで、[ **コンポーネントの追加** ] をクリックし、 **Audio Occluder** を追加します。
* **Audio Occluder** で、[ **カットオフの頻度** ] を **750** に設定します。

ユーザーと **AudioEmitter** の間のパスに複数の occluders がある場合、最も低い頻度がフィルターに適用されます。

* **ボリュームパススルー** を **0.75** に設定します。

ユーザーと **AudioEmitter** の間のパスに複数の occluders がある場合、ボリュームパススルーが加算に適用されます。

* [ **階層** ] パネルで、[ **マネージャー** ] を選択します。
* [ **インスペクター** ] パネルで、[ **音声入力ハンドラ** ] を展開します。
* **音声入力ハンドラー** で、 **[充電** ] を展開します。
* **関数** を **PolyActions** に変更します。

![キーワード: 利用料金](images/gocharge.png)

* 展開 **し** ます。
* **関数** を PolyActions に変更します。 **カムバック** です。

![キーワード: ここにあります](images/comehere.png)

#### <a name="build-and-deploy"></a>ビルドと配置

* 前と同様に、Unity でプロジェクトをビルドし、Visual Studio に配置します。

アプリケーションが展開された後:

* *「充電」* と入力して、P0LY にエネルギーハブを入力します。

サウンドの変更点に注意してください。 Muffled と少し静かに聞こえます。 自分とエネルギーハブの間に壁やその他のオブジェクトを配置できる場合は、現実の世界によって遮蔽されているため、さらに消音の音が発生します。

* *「ここ* に移動」と言うと、P0LY を使用してエネルギーハブを離れ、その前に配置します。

P0LY がエネルギーハブを終了すると、サウンドオクルージョンが削除されることに注意してください。 引き続き P0LY が聞こえる場合は、現実世界によって occluded されている可能性があります。 P0LY を明確に理解できるように、移動してみてください。

### <a name="part-3---room-models"></a>パート 3-部屋モデル

#### <a name="key-concepts"></a>主要概念

* 領域のサイズは、サウンドのローカライズに寄与する subliminal キューを提供します。
* Room モデルは、 **Audiosource** ごとに設定されます。
* [MixedRealityToolkit For Unity](https://github.com/Microsoft/MixedRealityToolkit-Unity)には、部屋モデルを設定するためのコードが用意されています。
* Mixed Reality エクスペリエンスの場合は、実際のワールド空間に最も適した部屋モデルを選択します。

仮想現実のシナリオを作成する場合は、仮想環境に最も適した部屋モデルを選択します。

## <a name="chapter-4---sound-design"></a>第4章-サウンドのデザイン

### <a name="objectives"></a>目標

* 効果的なサウンドデザインの考慮事項を理解します。
* さまざまな手法とガイドラインについて説明します。

### <a name="part-1---sound-and-experience-design"></a>パート 1-サウンドとエクスペリエンスの設計

このセクションでは、主要なサウンドとエクスペリエンスの設計に関する考慮事項とガイドラインについて説明します。

#### <a name="normalize-all-sounds"></a>すべてのサウンドを正規化する

これにより、サウンドごとにボリュームレベルを調整する特殊なケースコードが不要になるため、サウンドファイルを簡単に更新できるようになります。

#### <a name="design-for-an-untethered-experience"></a>ならではエクスペリエンスの設計

HoloLens は、完全に包含されたならでは holographic コンピューターです。 ユーザーは移動中にエクスペリエンスを使用できます。 オーディオミックスをテストしてください。

#### <a name="emit-sound-from-logical-locations-on-your-holograms"></a>ホログラムの論理位置からサウンドを生成します

現実の世界では、犬は尾からほえていません。人間の声は彼の足から来ていません。 ホログラムの予期しない部分からサウンドを生成しないようにします。

小さいホログラムの場合は、ジオメトリの中心からサウンドを出力するのが妥当です。

#### <a name="familiar-sounds-are-most-localizable"></a>使い慣れたサウンドが最もローカライズ可能

人間の声と音楽は、非常に簡単にローカライズできます。 だれかがあなたの名前を呼び出すと、声が出た方向と、それまでの距離から、正確に判断できます。 あまり知られていないサウンドをローカライズするのは困難です。

#### <a name="be-cognizant-of-user-expectations"></a>ユーザーの期待に cognizant

人生 experience は、サウンドの場所を特定する機能の一部を果たします。 これは、人間の声が特に簡単にローカライズできる理由の1つです。 サウンドを配置する際には、ユーザーが学習した期待を把握しておくことが重要です。

たとえば、他のユーザーが鳥の曲を聞いたときには、通常、鳥が見やすくなる傾向があります (飛行中またはツリー内)。 ユーザーは、サウンドの正しい方向を変えることは珍しくありませんが、間違った垂直方向では、ホログラムが見つからないときに混乱や不満を感じます。

#### <a name="avoid-hidden-emitters"></a>非表示の発信器を回避する

現実には、サウンドを聞くと、通常、サウンドを発しているオブジェクトを特定できます。 また、エクスペリエンスにも当てはまります。 ユーザーがサウンドを聞いたときに、音が聞こえ、オブジェクトを表示できないことを混乱ことがあります。

このガイドラインにはいくつかの例外があります。 たとえば、フィールドの crickets などのアンビエントサウンドが表示されないようにする必要があります。 生命経験により、これらのサウンドのソースについての知識を得ることができます。

### <a name="part-2---sound-mixing"></a>パート 2-サウンドの混合

#### <a name="target-your-mix-for-70-volume-on-the-hololens"></a>HoloLens で70% のボリュームをターゲットにする

Mixed Reality エクスペリエンスでは、ホログラムを現実世界で見ることができます。 また、現実世界のサウンドを聞くこともできます。 70% のボリュームターゲットを使用すると、ユーザーは自分の体験を楽しむことができます。

#### <a name="hololens-at-100-volume-should-drown-out-external-sounds"></a>100% ボリュームの HoloLens は外部サウンドを drown 必要があります

ボリュームレベル100% は、仮想現実のエクスペリエンスに似ています。 視覚的には、ユーザーは別の世界に転送されます。 同じものが true 音声でを保持している必要があります。

#### <a name="use-the-unity-audiomixer-to-adjust-categories-of-sounds"></a>Unity AudioMixer を使用して、サウンドのカテゴリを調整する

ミックスを設計する場合、サウンドカテゴリを作成し、ボリュームを1つの単位として増減できることがよくあります。 これにより、各サウンドの相対レベルが維持され、全体的なミックスをすばやく簡単に変更できるようになります。 一般的なカテゴリは次のとおりです。サウンド効果、アンビエント、ボイスオーバー、およびバックグラウンドミュージック。

#### <a name="mix-sounds-based-on-the-users-gaze"></a>ユーザーの宝石に基づいてサウンドをミキシングする

多くの場合、ユーザーが見ている (またはそうでない) 場所に基づいて、エクスペリエンスのサウンドミックスを変更すると便利な場合があります。 この手法の一般的な用途の1つは、Holographic フレームの外側にあるホログラムのボリュームレベルを下げることです。これにより、ユーザーは前の情報に簡単に集中することができます。 もう1つの用途は、ユーザーが重要なイベントに注意を向けるために、サウンドの音量を上げることです。

#### <a name="building-your-mix"></a>ミックスの構築

ミックスを構築するときは、エクスペリエンスのバックグラウンドオーディオから始め、重要度に基づいてレイヤーを追加することをお勧めします。 多くの場合、これにより、各レイヤーは前のレイヤーよりも大きくなります。

ミックスを反転したじょうごとして練りし、一番下に最も重要ではない (一般的に quietest の) サウンドを使用して、次の図のようなミックスを構築することをお勧めします。

![サウンドミックスの構造](images/soundlevels.png)

ボイスオーバーは興味深いシナリオです。 作成中のエクスペリエンスに基づいて、ステレオ (ローカライズされていない) サウンドを使用するか、またはボイスオーバーを spatialize することができます。 Microsoft が発行した2つのエクスペリエンスは、各シナリオの優れた例を示しています。

[HoloTour](https://www.microsoft.com/store/p/holotour/9nblggh5pj87) は、ステレオ音声を使用します。 ナレーターが表示されている場所を記述する場合、サウンドは一貫しており、ユーザーの位置によって異なります。 これにより、ナレーターは環境の spatialized 音から離れることなくシーンを記述できます。

[フラグメント](https://www.microsoft.com/store/p/fragments/9nblggh5ggm8) は、検出の形式で spatialized ボイスオーバーを利用します。 検出の声は、実際の人間が部屋にいたかのように、ユーザーが重要な手掛かりに注意を向けるために使用されます。 これにより、謎を immersion ことができます。

### <a name="part-3--performance"></a>パート 3-パフォーマンス

#### <a name="cpu-usage"></a>CPU 使用率

空間サウンドを使用する場合、10-12 発信器は CPU の約12% を消費します。

#### <a name="stream-long-audio-files"></a>長いオーディオファイルをストリーミングする

オーディオデータは、特に一般的なサンプルレート (44.1 と 48 kHz) で大きくなることがあります。 一般的なルールとして、5-10 秒を超えるオーディオファイルは、アプリケーションのメモリ使用量を減らすためにストリーミングする必要があります。

Unity では、ファイルのインポート設定でストリーミング用にオーディオファイルをマークできます。

![オーディオのインポート設定](images/audioimportsettings.png)

## <a name="chapter-5---special-effects"></a>Chapter 5-特殊効果

### <a name="objectives"></a>目標

* "マジックウィンドウ" に奥行を追加します。
* ユーザーを仮想環境に移します。

### <a name="magic-windows"></a>マジックウィンドウ

#### <a name="key-concepts"></a>主要概念

* 非表示の世界にビューを作成することは、視覚的に説得力のあるものです。
* ホログラムやユーザーが非表示の世界に近づいたときにオーディオ効果を追加して、リアリティを高めます。

#### <a name="instructions"></a>Instructions

* [ **階層** ] パネルで、[ **HologramCollection** ] を展開し、[ **黄泉** ] を選択します。
* [ **黄泉** ] を展開し、[ **VoiceSource** ] を選択します。
* [ **インスペクター** ] パネルで、[ **コンポーネントの追加** ] をクリックし、ユーザーの **音声効果** を追加します。

**Audiosource** コンポーネントが **VoiceSource** に追加されます。

* **Audiosource** で、[ **出力** ] を **UserVoice (ミキサー)** に設定します。
* **Spatialize** チェックボックスをオンにします。
* [ **空間 Blend** ] スライダーを **3d** にドラッグするか、編集ボックスに「 **1** 」と入力します。
* **3D サウンド設定** を展開します。
* **ドップラーレベル** を **0** に設定します。
* [ **ユーザーの声の効果** ] で、[ **親オブジェクト** ] をシーンから **黄泉** に設定します。
* **Max Distance** を **1** に設定します。

[ **最大距離** の設定] を使用すると、 **ユーザーの音声効果** は、ユーザーが親オブジェクトに対して、効果を有効にする前にどのように閉じる必要があるかを示します。

* [ **ユーザーの音声効果** ] で、[ **コーラスパラメーター** ] を展開します。
* **深さ** を **0.1** に設定します。
* **タップ1ボリューム** を設定し、 **2 つのボリュームをタップ** して、 **3 つのボリューム** を **0.8** にタップします。
* **元のサウンドボリューム** を **0.5** に設定します。

前の設定では、ユーザーの声に豊富な部分を追加するために使用される Unity **AudioChorusFilter** のパラメーターを構成しています。

* [ **ユーザーの音声効果** ] で、[ **エコーパラメーター** ] を展開します。
* **Delay** を **300** に設定します。
* **減衰率** を **0.2** に設定します。
* **元のサウンドボリューム** を **0** に設定します。

前の設定では、ユーザーの音声をエコーするために使用する Unity **AudioEchoFilter** のパラメーターを構成しています。

ユーザーの声効果スクリプトは、次のことを担当します。

* ユーザーと、スクリプトがアタッチされているユーザー **オブジェクト** との距離を測定します。
* ユーザーが接続 **オブジェクト** を接続しているかどうかを判断します。

ユーザーは、効果を有効にするために、距離に関係なく、接続オブジェクトに接続する必要があります。

* **AudioChorusFilter** と **AudioEchoFilter** を **audiosource** に適用して構成します。
* フィルターを無効にして効果を無効にする。

ユーザーの音声効果では、 [MixedRealityToolkit For Unity](https://github.com/Microsoft/MixedRealityToolkit-Unity)の Mic ストリームセレクターコンポーネントを使用して、高品質の音声ストリームを選択し、unity のオーディオシステムにルーティングします。

* [ **階層** ] パネルで、[ **マネージャー** ] を選択します。
* [ **インスペクター** ] パネルで、[ **音声入力ハンドラ** ] を展開します。
* **音声入力ハンドラー** で、[ **黄泉を表示する]** を展開します。
* **関数** を **UnderworldBase** に変更します。

![キーワード: 黄泉を表示する](images/showunderworld.png)

* [ **黄泉の非表示** ] を展開します。
* **関数** を **UnderworldBase** に変更します。

![キーワード: 黄泉の非表示](images/hideunderworld.png)

#### <a name="build-and-deploy"></a>ビルドと配置

* 前と同様に、Unity でプロジェクトをビルドし、Visual Studio に配置します。

アプリケーションが展開された後:

* 表面 (壁面、床、テーブル) に顔を置いて、"黄泉の顔を *表示する"* と言います。

黄泉のものが表示され、他のすべてのホログラムは非表示になります。 黄泉の場所にいない場合は、実際の画面に接続していることを確認します。

* 黄泉のホログラムの1メートル以内にアプローチし、話し始めます。

音声にオーディオ効果が適用されました。

* 黄泉の場所から離れると、効果がどのように適用されるかがわかります。
* *"黄泉の非表示" を "* 黄泉の人に隠す" と言います。

黄泉の場合は非表示になり、以前に非表示になったホログラムは再び表示されます。

## <a name="the-end"></a>最後です

お疲れさまでした。 これで **MR 空間 220: 空間サウンド** が完成しました。

世界を聞いて、ご意見をお待ちしております。